(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91417,14677,e=>{"use strict";let a,t="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),i=new Uint8Array(16),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));let s=function(e,s,o){if(t&&!s&&!e)return t();var r=e,l=o;let c=(r=r||{}).random??r.rng?.()??function(){if(!a){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(i)}();if(c.length<16)throw Error("Random bytes length must be >= 16");if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,s){if((l=l||0)<0||l+16>s.length)throw RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);for(let e=0;e<16;++e)s[l+e]=c[e];return s}return function(e,a=0){return(n[e[a+0]]+n[e[a+1]]+n[e[a+2]]+n[e[a+3]]+"-"+n[e[a+4]]+n[e[a+5]]+"-"+n[e[a+6]]+n[e[a+7]]+"-"+n[e[a+8]]+n[e[a+9]]+"-"+n[e[a+10]]+n[e[a+11]]+n[e[a+12]]+n[e[a+13]]+n[e[a+14]]+n[e[a+15]]).toLowerCase()}(c)};e.s(["v4",0,s],14677);let o="appteczka_medicines";function r(){try{let e=localStorage.getItem(o);if(!e)return[];let a=JSON.parse(e);return Array.isArray(a)?a:[]}catch{return console.error("Błąd odczytu danych z localStorage"),[]}}function l(e){try{localStorage.setItem(o,JSON.stringify(e))}catch{console.error("Błąd zapisu danych do localStorage")}}function c(e){let a=r(),t=[];for(let i of e){if(!i.nazwa)continue;let e=a.find(e=>e.nazwa?.toLowerCase().trim()===i.nazwa?.toLowerCase().trim());e&&t.push({nazwa:i.nazwa,existingId:e.id})}return t}function d(e,a){let t=r(),i=[];for(let n of e.leki){if(!n.nazwa){let e={id:s(),nazwa:n.nazwa,opis:n.opis,wskazania:n.wskazania,tagi:n.tagi,labels:n.labels,notatka:n.notatka,dataDodania:new Date().toISOString()};i.push(e);continue}let e=a.get(n.nazwa)||"add",o=t.findIndex(e=>e.nazwa?.toLowerCase().trim()===n.nazwa?.toLowerCase().trim());if(-1!==o&&"replace"===e)t[o]={...t[o],opis:n.opis,wskazania:n.wskazania,tagi:n.tagi,labels:n.labels,notatka:n.notatka};else{if("skip"===e)continue;let a={id:s(),nazwa:n.nazwa,opis:n.opis,wskazania:n.wskazania,tagi:n.tagi,labels:n.labels,notatka:n.notatka,dataDodania:new Date().toISOString()};i.push(a)}}return l([...t,...i]),i}function u(e,a){let t=r(),i=[];for(let n of e.leki){if(!n.nazwa){let e={...n,id:s(),dataDodania:n.dataDodania||new Date().toISOString()};i.push(e);continue}let e=a.get(n.nazwa)||"add",o=t.findIndex(e=>e.nazwa?.toLowerCase().trim()===n.nazwa?.toLowerCase().trim());if(-1!==o&&"replace"===e)t[o]={...n,id:t[o].id};else{if("skip"===e)continue;let a={...n,id:s(),dataDodania:n.dataDodania||new Date().toISOString()};i.push(a)}}return l([...t,...i]),i}function m(e){let a=r(),t=a.filter(a=>a.id!==e);return t.length!==a.length&&(l(t),!0)}function p(e,a){let t=r(),i=t.findIndex(a=>a.id===e);return -1===i?null:(t[i]={...t[i],...a},l(t),t[i])}function x(){localStorage.removeItem(o)}function f(){return JSON.stringify({leki:r()},null,2)}function h(e){if(!e||"object"!=typeof e||!Array.isArray(e.leki)||0===e.leki.length)return!1;let a=e.leki[0];return"string"==typeof a.id&&"string"==typeof a.dataDodania}e.s(["clearMedicines",()=>x,"deleteMedicine",()=>m,"exportMedicines",()=>f,"findDuplicates",()=>c,"getMedicines",()=>r,"importBackup",()=>u,"importMedicinesWithDuplicateHandling",()=>d,"isBackupFormat",()=>h,"updateMedicine",()=>p],91417)},60321,e=>{"use strict";var a=e.i(43476),t=e.i(71645),i=e.i(91417),n=e.i(22016),s=e.i(57688),o=e.i(81965);function r(){let[e,r]=(0,t.useState)(0),[l,c]=(0,t.useState)("idle"),[d,u]=(0,t.useState)("idle");(0,t.useEffect)(()=>{r((0,i.getMedicines)().length)},[]);let m=async()=>{try{let e=(0,i.exportMedicines)();await navigator.clipboard.writeText(e),c("copied"),setTimeout(()=>c("idle"),2e3)}catch{c("error"),setTimeout(()=>c("idle"),2e3)}},p=`{
  "leki": [
    {
      "id": "abc-123",
      "nazwa": "Paracetamol",
      "opis": "Lek przeciwb\xf3lowy...",
      "wskazania": ["b\xf3l głowy"],
      "tagi": ["przeciwb\xf3lowy"],
      "labels": ["label-id-1"],
      "notatka": "Dawkowanie: 1 tabletka co 6h",
      "terminWaznosci": "2025-12-31",
      "dataDodania": "2024-01-15"
    }
  ]
}`;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"neu-flat p-6 animate-fadeInUp",style:{animationDelay:"0.1s",background:"linear-gradient(145deg, var(--color-bg-light), var(--color-bg-dark))"},children:(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold",style:{color:"var(--color-text)"},children:"Kopia zapasowa"}),(0,a.jsx)("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"Pobierz lub skopiuj dane apteczki"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"neu-convex flex h-12 w-12 items-center justify-center",style:{borderRadius:"50%"},children:(0,a.jsx)(s.default,{src:"/icons/backup.png",alt:"Pudełko otwarte",width:28,height:28})}),(0,a.jsx)("span",{style:{color:"var(--color-text-muted)"},children:"→"}),(0,a.jsx)("div",{className:"neu-convex flex h-12 w-12 items-center justify-center",style:{borderRadius:"50%"},children:(0,a.jsx)(s.default,{src:"/icons/backup_closed.png",alt:"Pudełko zamknięte",width:28,height:28})})]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"Liczba leków w pudełku:"}),(0,a.jsx)("span",{className:"text-2xl font-bold",style:{color:"var(--color-accent)"},children:e})]})]})}),0===e?(0,a.jsxs)("div",{className:"neu-flat p-8 text-center animate-fadeInUp",style:{animationDelay:"0.2s",background:"linear-gradient(145deg, #fef3c7, #fde68a)"},children:[(0,a.jsx)("div",{className:"neu-convex w-20 h-20 mx-auto mb-4 flex items-center justify-center animate-popIn",children:(0,a.jsx)(o.SvgIcon,{name:"package",size:40,style:{color:"var(--color-warning)"}})}),(0,a.jsx)("p",{className:"text-lg font-medium",style:{color:"#92400e"},children:"Apteczka jest pusta"}),(0,a.jsx)("p",{className:"mt-2 text-sm",style:{color:"#78350f"},children:"Nie ma czego eksportować. Najpierw dodaj leki."}),(0,a.jsxs)(n.default,{href:"/dodaj",className:"mt-6 inline-flex items-center gap-1.5 neu-btn neu-btn-primary",children:[(0,a.jsx)(o.SvgIcon,{name:"plus",size:16,style:{color:"#8b5cf6"}})," Dodaj leki →"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"neu-flat p-6 animate-fadeInUp",style:{animationDelay:"0.2s"},children:[(0,a.jsxs)("h2",{className:"font-semibold flex items-center gap-1.5",style:{color:"var(--color-text)"},children:[(0,a.jsx)(o.SvgIcon,{name:"folder-output",size:18})," Eksportuj dane"]}),(0,a.jsx)("p",{className:"mt-1 text-sm",style:{color:"var(--color-text-muted)"},children:"Plik zawiera wszystkie leki wraz z terminami ważności i datami dodania."}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{try{let e=(0,i.exportMedicines)(),a="data:application/json;charset=utf-8,"+encodeURIComponent(e),t=document.createElement("a");t.setAttribute("href",a),t.setAttribute("download",`apteczka_backup_${new Date().toISOString().split("T")[0]}.json`),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),u("success"),setTimeout(()=>u("idle"),3e3)}catch{u("error"),setTimeout(()=>u("idle"),3e3)}},className:`neu-btn ${"success"===d||"error"===d?"":"neu-btn-primary"}`,style:"success"===d?{background:"var(--color-success)",color:"white"}:"error"===d?{background:"var(--color-error)",color:"white"}:{},children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"success"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.SvgIcon,{name:"check-circle",size:14})," Pobrano!"]}),"error"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.SvgIcon,{name:"x-circle",size:14})," Błąd pobierania"]}),"idle"===d&&"Pobierz plik .json"]}),(0,a.jsxs)("button",{onClick:m,className:"neu-btn neu-btn-secondary ",style:"copied"===l?{color:"var(--color-success)"}:{},children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"copied"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.SvgIcon,{name:"check-circle",size:14})," Skopiowano!"]}):"Kopiuj JSON"]})]})]}),(0,a.jsxs)("div",{className:"warning-card neu-flat p-5 animate-fadeInUp",style:{animationDelay:"0.3s"},children:[(0,a.jsxs)("h3",{className:"warning-card-title font-semibold flex items-center gap-1.5",children:[(0,a.jsx)(o.SvgIcon,{name:"alert-triangle",size:18})," Pobieranie nie działa?"]}),(0,a.jsx)("p",{className:"warning-card-text mt-2 text-sm",children:"Niektóre przeglądarki zarządzane przez organizację blokują pobieranie plików. W takim przypadku:"}),(0,a.jsxs)("ol",{className:"warning-card-text mt-3 list-inside list-decimal space-y-1 text-sm",children:[(0,a.jsxs)("li",{children:["Kliknij ",(0,a.jsx)("strong",{children:'"Kopiuj JSON"'})," powyżej"]}),(0,a.jsx)("li",{children:"Otwórz Notatnik (Windows) lub TextEdit (Mac)"}),(0,a.jsx)("li",{children:"Wklej skopiowany tekst (Ctrl+V)"}),(0,a.jsxs)("li",{children:["Zapisz jako ",(0,a.jsx)("code",{className:"neu-tag text-xs",children:"apteczka_backup.json"})]})]})]})]}),(0,a.jsxs)("div",{className:"neu-flat p-6 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[(0,a.jsxs)("h2",{className:"font-semibold flex items-center gap-1.5",style:{color:"var(--color-text)"},children:[(0,a.jsx)(o.SvgIcon,{name:"folder-input",size:18})," Przywracanie kopii zapasowej"]}),(0,a.jsxs)("p",{className:"mt-1 text-sm",style:{color:"var(--color-text-muted)"},children:["Aby przywrócić dane z kopii zapasowej, przejdź do zakładki ",(0,a.jsx)("strong",{children:'"Dodaj leki"'}),"i wczytaj plik .json lub wklej skopiowany JSON."]}),(0,a.jsx)(n.default,{href:"/dodaj",className:"mt-4 inline-block neu-btn neu-btn-secondary",children:"Przejdź do importu →"})]}),(0,a.jsxs)("div",{className:"neu-flat p-6 animate-fadeInUp",style:{animationDelay:"0.5s"},children:[(0,a.jsxs)("h2",{className:"font-semibold flex items-center gap-1.5",style:{color:"var(--color-text)"},children:[(0,a.jsx)(o.SvgIcon,{name:"file-text",size:18})," Format pliku kopii zapasowej"]}),(0,a.jsx)("p",{className:"mt-1 text-sm",style:{color:"var(--color-text-muted)"},children:"Jeśli chcesz ręcznie utworzyć lub edytować plik, użyj tego formatu:"}),(0,a.jsx)("pre",{className:"mt-3 overflow-auto rounded-lg p-4 text-xs",style:{background:"#1a1f1c",color:"var(--color-accent-light)"},children:p}),(0,a.jsxs)("p",{className:"mt-3 text-xs",style:{color:"var(--color-text-muted)"},children:["Pola ",(0,a.jsx)("code",{className:"neu-tag text-xs",children:"id"})," i ",(0,a.jsx)("code",{className:"neu-tag text-xs",children:"dataDodania"})," zostaną wygenerowane automatycznie przy imporcie, jeśli ich brakuje."]})]})]})}e.s(["default",()=>r])}]);