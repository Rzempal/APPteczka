{"version":3,"sources":["../../../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","../../../../../../apps/web/src/app/page.tsx","../../../../../../apps/web/src/components/MedicineCard.tsx","../../../../../../apps/web/src/lib/labelStorage.ts","../../../../../../apps/web/src/components/LabelSelector.tsx","../../../../../../apps/web/src/components/PdfModal.tsx","../../../../../../apps/web/src/actions/data%3Ac7212c%20%3Ctext/javascript%3E","../../../../../../apps/web/src/components/MedicineList.tsx","../../../../../../apps/web/src/components/Filters.tsx","../../../../../../apps/web/src/components/LabelManager.tsx"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","'use client';\r\n\r\n// src/app/page.tsx\r\n// Strona główna – lista leków z filtrami, sortowaniem i eksportem PDF\r\n// Neumorphism Style\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport type { Medicine, FilterState } from '@/lib/types';\r\nimport { getMedicines, deleteMedicine, updateMedicine, clearMedicines } from '@/lib/storage';\r\nimport { generateMedicineList, copyToClipboard } from '@/lib/prompts';\r\nimport MedicineList from '@/components/MedicineList';\r\nimport Filters from '@/components/Filters';\r\n\r\ntype SortOption = 'nazwa' | 'dataDodania' | 'terminWaznosci';\r\ntype SortDirection = 'asc' | 'desc';\r\n\r\nexport default function HomePage() {\r\n  const [medicines, setMedicines] = useState<Medicine[]>([]);\r\n  const [filters, setFilters] = useState<FilterState>({\r\n    tags: [],\r\n    labels: [],\r\n    search: '',\r\n    expiry: 'all'\r\n  });\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [sortBy, setSortBy] = useState<SortOption>('nazwa');\r\n  const [sortDir, setSortDir] = useState<SortDirection>('asc');\r\n  const [copyListStatus, setCopyListStatus] = useState<'idle' | 'copied'>('idle');\r\n\r\n  // Załaduj leki z localStorage przy starcie\r\n  useEffect(() => {\r\n    setMedicines(getMedicines());\r\n    setIsLoaded(true);\r\n\r\n    // Nasłuchuj na zmiany w lekach (np. po usunięciu etykiety)\r\n    const handleMedicinesUpdated = () => {\r\n      setMedicines(getMedicines());\r\n    };\r\n    window.addEventListener('medicinesUpdated', handleMedicinesUpdated);\r\n    return () => window.removeEventListener('medicinesUpdated', handleMedicinesUpdated);\r\n  }, []);\r\n\r\n  // Sortowanie\r\n  const sortedMedicines = useMemo(() => {\r\n    const sorted = [...medicines].sort((a, b) => {\r\n      let comparison = 0;\r\n\r\n      switch (sortBy) {\r\n        case 'nazwa':\r\n          const nameA = (a.nazwa || 'zzz').toLowerCase();\r\n          const nameB = (b.nazwa || 'zzz').toLowerCase();\r\n          comparison = nameA.localeCompare(nameB, 'pl');\r\n          break;\r\n        case 'dataDodania':\r\n          comparison = new Date(a.dataDodania).getTime() - new Date(b.dataDodania).getTime();\r\n          break;\r\n        case 'terminWaznosci':\r\n          const expiryA = a.terminWaznosci ? new Date(a.terminWaznosci).getTime() : Infinity;\r\n          const expiryB = b.terminWaznosci ? new Date(b.terminWaznosci).getTime() : Infinity;\r\n          comparison = expiryA - expiryB;\r\n          break;\r\n      }\r\n\r\n      return sortDir === 'asc' ? comparison : -comparison;\r\n    });\r\n\r\n    return sorted;\r\n  }, [medicines, sortBy, sortDir]);\r\n\r\n  const handleDelete = (id: string) => {\r\n    if (confirm('Czy na pewno chcesz usunąć ten lek z apteczki?')) {\r\n      deleteMedicine(id);\r\n      setMedicines(getMedicines());\r\n    }\r\n  };\r\n\r\n  const handleUpdateExpiry = (id: string, date: string | undefined) => {\r\n    updateMedicine(id, { terminWaznosci: date });\r\n    setMedicines(getMedicines());\r\n  };\r\n\r\n  const handleUpdateLabels = (id: string, labelIds: string[]) => {\r\n    updateMedicine(id, { labels: labelIds });\r\n    setMedicines(getMedicines());\r\n  };\r\n\r\n  const handleUpdateNote = (id: string, note: string | undefined) => {\r\n    updateMedicine(id, { notatka: note });\r\n    setMedicines(getMedicines());\r\n  };\r\n\r\n  const handleUpdateLeaflet = (id: string, url: string | undefined) => {\r\n    updateMedicine(id, { leafletUrl: url });\r\n    setMedicines(getMedicines());\r\n  };\r\n\r\n  const handleExportPDF = async () => {\r\n    const { jsPDF } = await import('jspdf');\r\n    const autoTable = (await import('jspdf-autotable')).default;\r\n\r\n    const doc = new jsPDF();\r\n\r\n    // Funkcja do zamiany polskich znaków\r\n    const removeDiacritics = (text: string): string => {\r\n      const map: Record<string, string> = {\r\n        'ą': 'a', 'ć': 'c', 'ę': 'e', 'ł': 'l', 'ń': 'n',\r\n        'ó': 'o', 'ś': 's', 'ź': 'z', 'ż': 'z',\r\n        'Ą': 'A', 'Ć': 'C', 'Ę': 'E', 'Ł': 'L', 'Ń': 'N',\r\n        'Ó': 'O', 'Ś': 'S', 'Ź': 'Z', 'Ż': 'Z'\r\n      };\r\n      return text.replace(/[ąćęłńóśźżĄĆĘŁŃÓŚŹŻ]/g, char => map[char] || char);\r\n    };\r\n\r\n    // Tytuł - czarno-biały\r\n    doc.setFontSize(14);\r\n    doc.setTextColor(0); // Czarny\r\n    doc.text('Moja Apteczka', 14, 14);\r\n    doc.setFontSize(8);\r\n    doc.setTextColor(80); // Ciemnoszary\r\n    doc.text(`${new Date().toLocaleDateString('pl-PL')}`, 60, 14);\r\n\r\n    // Tabelka czarno-biała z kolumną Notatka\r\n    const tableData = sortedMedicines.map(m => [\r\n      removeDiacritics(m.nazwa || 'Nieznany'),\r\n      removeDiacritics(m.wskazania.slice(0, 2).join(', ') || '-'),\r\n      m.terminWaznosci ? new Date(m.terminWaznosci).toLocaleDateString('pl-PL') : '-',\r\n      removeDiacritics(m.notatka || '-')\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 20,\r\n      head: [['Nazwa', 'Wskazania', 'Termin', 'Notatka']],\r\n      body: tableData,\r\n      styles: {\r\n        fontSize: 7,\r\n        cellPadding: 1.5,\r\n        lineColor: [0, 0, 0], // Czarna linia\r\n        lineWidth: 0.2,\r\n        textColor: [0, 0, 0], // Czarny tekst\r\n      },\r\n      headStyles: {\r\n        fillColor: [255, 255, 255], // Białe tło nagłówka\r\n        textColor: [0, 0, 0], // Czarny tekst\r\n        fontStyle: 'bold',\r\n        cellPadding: 2,\r\n        lineColor: [0, 0, 0],\r\n        lineWidth: 0.3,\r\n      },\r\n      columnStyles: {\r\n        0: { cellWidth: 35 },\r\n        1: { cellWidth: 50 },\r\n        2: { cellWidth: 20, halign: 'center' },\r\n        3: { cellWidth: 'auto' },\r\n      },\r\n      margin: { left: 14, right: 14, top: 10 },\r\n      alternateRowStyles: {\r\n        fillColor: [255, 255, 255], // Białe - brak kolorów\r\n      },\r\n    });\r\n\r\n    // Disclaimer - czarno-biały\r\n    const finalY = (doc as typeof doc & { lastAutoTable?: { finalY: number } }).lastAutoTable?.finalY || 100;\r\n    doc.setFontSize(6);\r\n    doc.setTextColor(80);\r\n    doc.text('Pudelko na leki - narzedzie informacyjne, nie porada medyczna.', 14, finalY + 5);\r\n\r\n    doc.save(`apteczka_${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  const handleSortChange = (option: SortOption) => {\r\n    if (sortBy === option) {\r\n      setSortDir(prev => prev === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortBy(option);\r\n      setSortDir('asc');\r\n    }\r\n  };\r\n\r\n  const handleCopyList = async () => {\r\n    const list = generateMedicineList(sortedMedicines);\r\n    const success = await copyToClipboard(list);\r\n    if (success) {\r\n      setCopyListStatus('copied');\r\n      setTimeout(() => setCopyListStatus('idle'), 2000);\r\n    }\r\n  };\r\n\r\n  const handleClearAll = () => {\r\n    clearMedicines();\r\n    setMedicines([]);\r\n  };\r\n\r\n  // Skeleton podczas ładowania\r\n  if (!isLoaded) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"neu-skeleton h-12 w-48\" />\r\n        <div className=\"grid gap-5 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {[1, 2, 3].map(i => (\r\n            <div key={i} className=\"neu-skeleton h-64\" />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Główna zawartość */}\r\n      <div className=\"grid gap-6 lg:grid-cols-[300px_1fr]\">\r\n        {/* Sidebar z filtrami */}\r\n        {medicines.length > 0 && (\r\n          <aside className=\"lg:sticky lg:top-28 lg:h-fit\">\r\n            <Filters\r\n              filters={filters}\r\n              onFiltersChange={setFilters}\r\n              onExportPDF={handleExportPDF}\r\n              onCopyList={handleCopyList}\r\n              onClearAll={handleClearAll}\r\n            />\r\n            {copyListStatus === 'copied' && (\r\n              <div className=\"mt-2 neu-flat p-2 text-center text-sm animate-fadeInUp\" style={{ color: 'var(--color-success)' }}>\r\n                ✅ Skopiowano listę leków!\r\n              </div>\r\n            )}\r\n          </aside>\r\n        )}\r\n\r\n        {/* Lista leków */}\r\n        <section className={medicines.length === 0 ? 'lg:col-span-2' : ''}>\r\n          <MedicineList\r\n            medicines={sortedMedicines}\r\n            filters={filters}\r\n            onDelete={handleDelete}\r\n            onUpdateExpiry={handleUpdateExpiry}\r\n            onUpdateLabels={handleUpdateLabels}\r\n            onUpdateNote={handleUpdateNote}\r\n            onUpdateLeaflet={handleUpdateLeaflet}\r\n            totalCount={medicines.length}\r\n            sortBy={sortBy}\r\n            sortDir={sortDir}\r\n            onSortChange={handleSortChange}\r\n          />\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\n// src/components/MedicineCard.tsx\r\n// Karta pojedynczego leku - Neumorphism Style\r\n\r\nimport { useState } from 'react';\r\nimport type { Medicine } from '@/lib/types';\r\nimport { LABEL_COLORS } from '@/lib/types';\r\nimport { getLabelsByIds } from '@/lib/labelStorage';\r\nimport LabelSelector from './LabelSelector';\r\nimport PdfModal from './PdfModal';\r\nimport { searchMedicineInRpl, type RplSearchResult } from '@/actions/rplActions';\r\nimport { SvgIcon } from './SvgIcon';\r\n\r\ninterface MedicineCardProps {\r\n    medicine: Medicine;\r\n    onDelete: (id: string) => void;\r\n    onUpdateExpiry: (id: string, date: string | undefined) => void;\r\n    onUpdateLabels: (id: string, labelIds: string[]) => void;\r\n    onUpdateNote: (id: string, note: string | undefined) => void;\r\n    onUpdateLeaflet: (id: string, url: string | undefined) => void;\r\n    isCollapsed?: boolean;\r\n    onToggleCollapse?: () => void;\r\n}\r\n\r\n/**\r\n * Sprawdza status terminu ważności\r\n */\r\nfunction getExpiryStatus(terminWaznosci?: string): 'expired' | 'expiring-soon' | 'valid' | 'unknown' {\r\n    if (!terminWaznosci) return 'unknown';\r\n\r\n    const today = new Date();\r\n    const expiry = new Date(terminWaznosci);\r\n    const daysUntilExpiry = Math.ceil((expiry.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n    if (daysUntilExpiry < 0) return 'expired';\r\n    if (daysUntilExpiry <= 30) return 'expiring-soon';\r\n    return 'valid';\r\n}\r\n\r\n/**\r\n * Formatuje datę do czytelnej postaci\r\n */\r\nfunction formatDate(dateString?: string): string {\r\n    if (!dateString) return 'Nie ustawiono';\r\n    return new Date(dateString).toLocaleDateString('pl-PL');\r\n}\r\n\r\nexport default function MedicineCard({ medicine, onDelete, onUpdateExpiry, onUpdateLabels, onUpdateNote, onUpdateLeaflet, isCollapsed = false, onToggleCollapse }: MedicineCardProps) {\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [expiryDate, setExpiryDate] = useState(medicine.terminWaznosci || '');\r\n    const [isEditingNote, setIsEditingNote] = useState(false);\r\n    const [noteText, setNoteText] = useState(medicine.notatka || '');\r\n\r\n    // Stany dla wyszukiwarki ulotek\r\n    const [isSearchingLeaflet, setIsSearchingLeaflet] = useState(false);\r\n    const [leafletSearchResults, setLeafletSearchResults] = useState<RplSearchResult[]>([]);\r\n    const [leafletLoading, setLeafletLoading] = useState(false);\r\n    const [isPdfModalOpen, setIsPdfModalOpen] = useState(false);\r\n    const [leafletSearchQuery, setLeafletSearchQuery] = useState('');\r\n\r\n    const expiryStatus = getExpiryStatus(medicine.terminWaznosci);\r\n\r\n    const handleSaveExpiry = () => {\r\n        onUpdateExpiry(medicine.id, expiryDate || undefined);\r\n        setIsEditing(false);\r\n    };\r\n\r\n    const handleSaveNote = () => {\r\n        onUpdateNote(medicine.id, noteText.trim() || undefined);\r\n        setIsEditingNote(false);\r\n    };\r\n\r\n    // Otwórz panel wyszukiwania\r\n    const handleOpenLeafletSearch = () => {\r\n        setLeafletSearchQuery(medicine.nazwa || '');\r\n        setIsSearchingLeaflet(true);\r\n        setLeafletSearchResults([]);\r\n    };\r\n\r\n    // Wyszukiwanie ulotki w RPL\r\n    const handleSearchLeaflet = async (query?: string) => {\r\n        const searchQuery = query || leafletSearchQuery;\r\n        if (!searchQuery || searchQuery.trim().length < 3) return;\r\n\r\n        setLeafletLoading(true);\r\n\r\n        try {\r\n            const results = await searchMedicineInRpl(searchQuery.trim());\r\n            setLeafletSearchResults(results);\r\n        } catch (error) {\r\n            console.error('Błąd wyszukiwania ulotki:', error);\r\n            setLeafletSearchResults([]);\r\n        } finally {\r\n            setLeafletLoading(false);\r\n        }\r\n    };\r\n\r\n    // Przypisanie ulotki do leku\r\n    const handleSelectLeaflet = (url: string) => {\r\n        onUpdateLeaflet(medicine.id, url);\r\n        setIsSearchingLeaflet(false);\r\n        setLeafletSearchResults([]);\r\n        setLeafletSearchQuery('');\r\n    };\r\n\r\n    // Odepnięcie ulotki\r\n    const handleRemoveLeaflet = () => {\r\n        onUpdateLeaflet(medicine.id, undefined);\r\n    };\r\n\r\n    const statusClasses = {\r\n        expired: 'neu-status-error',\r\n        'expiring-soon': 'neu-status-warning',\r\n        valid: 'neu-status-valid',\r\n        unknown: 'neu-status-unknown'\r\n    };\r\n\r\n    const statusLabels: Record<string, React.ReactNode> = {\r\n        expired: <><SvgIcon name=\"alert-triangle\" size={14} style={{ color: 'var(--color-error)' }} /> Przeterminowany</>,\r\n        'expiring-soon': <><SvgIcon name=\"clock\" size={14} style={{ color: 'var(--color-warning)' }} /> Kończy się ważność</>,\r\n        valid: <><SvgIcon name=\"check-circle\" size={14} style={{ color: 'var(--color-success)' }} /> Ważny</>,\r\n        unknown: <><SvgIcon name=\"help-circle\" size={14} style={{ color: 'var(--color-text-muted)' }} /> Brak daty</>\r\n    };\r\n\r\n    // Ikony statusu (dla nagłówka terminu ważności)\r\n    const statusIcons: Record<string, React.ReactNode> = {\r\n        expired: <SvgIcon name=\"alert-triangle\" size={16} style={{ color: 'var(--color-error)' }} />,\r\n        'expiring-soon': <SvgIcon name=\"clock\" size={16} style={{ color: 'var(--color-warning)' }} />,\r\n        valid: <SvgIcon name=\"check-circle\" size={16} style={{ color: 'var(--color-success)' }} />,\r\n        unknown: <SvgIcon name=\"help-circle\" size={16} style={{ color: 'var(--color-text-muted)' }} />\r\n    };\r\n\r\n    // Teksty statusu (bez ikony)\r\n    const statusTexts: Record<string, string> = {\r\n        expired: 'Przeterminowany',\r\n        'expiring-soon': 'Kończy się ważność',\r\n        valid: 'Ważny',\r\n        unknown: 'Brak daty'\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <article\r\n                className={`p-5 rounded-2xl transition-all duration-300 hover:-translate-y-1 glass-dark ${statusClasses[expiryStatus]}`}\r\n                style={{ borderRadius: '20px', overflow: 'visible' }}\r\n            >\r\n                {/* Nagłówek - klikalny do zwijania */}\r\n                <header\r\n                    className=\"mb-3 flex items-start justify-between cursor-pointer group\"\r\n                    onClick={onToggleCollapse}\r\n                    role=\"button\"\r\n                    aria-expanded={!isCollapsed}\r\n                >\r\n                    <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 flex-1\">\r\n                        <h3 className=\"text-lg font-semibold\" style={{ color: 'var(--color-text)' }}>\r\n                            {medicine.nazwa || <span className=\"italic\" style={{ color: 'var(--color-text-muted)' }}>Nazwa nieznana</span>}\r\n                        </h3>\r\n                        {/* Etykiety w widoku zwiniętym (collapsed) - obok nazwy jeśli jest miejsce */}\r\n                        {isCollapsed && medicine.labels && medicine.labels.length > 0 && (\r\n                            <div className=\"flex flex-wrap gap-1 pl-1\">\r\n                                {getLabelsByIds(medicine.labels).map(label => (\r\n                                    <span\r\n                                        key={label.id}\r\n                                        className=\"inline-flex items-center text-xs px-1.5 py-0.5 rounded-full\"\r\n                                        style={{\r\n                                            backgroundColor: LABEL_COLORS[label.color].hex,\r\n                                            color: 'white',\r\n                                            fontSize: '0.65rem',\r\n                                            boxShadow: '1px 1px 2px rgba(0,0,0,0.15), -1px -1px 2px rgba(255,255,255,0.1)'\r\n                                        }}\r\n                                    >\r\n                                        {label.name}\r\n                                    </span>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <span\r\n                        className={`neu-tag p-2 transition-all group-hover:scale-110 flex-shrink-0 ${isCollapsed ? 'active' : ''}`}\r\n                        style={{ borderRadius: '50%' }}\r\n                    >\r\n                        <svg\r\n                            className={`h-4 w-4 transition-transform duration-300 ${isCollapsed ? '' : 'rotate-180'}`}\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                            style={{ color: 'var(--color-text-muted)' }}\r\n                        >\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                        </svg>\r\n                    </span>\r\n                </header>\r\n\r\n                {/* Opis - zawsze widoczny */}\r\n                <p className=\"mb-3 text-sm\" style={{ color: 'var(--color-text-muted)' }}>{medicine.opis}</p>\r\n\r\n                {/* Szczegóły wewnętrzne - ukryte gdy zwinięte (BEZ etykiet - one są poza overflow-hidden) */}\r\n                <div\r\n                    className={`overflow-hidden transition-all duration-300 ease-in-out ${isCollapsed ? 'max-h-0 opacity-0' : 'max-h-[500px] opacity-100'}`}\r\n                >\r\n                    {/* Ulotka PDF - pierwsza po rozwinieciu */}\r\n                    <div className=\"mb-3 pl-1\">\r\n                        <span className=\"text-xs font-medium\" style={{ color: 'var(--color-text-muted)' }}>Ulotka PDF:</span>\r\n\r\n                        {medicine.leafletUrl ? (\r\n                            <div className=\"mt-1 flex items-center gap-2 flex-wrap\">\r\n                                <button\r\n                                    onClick={(e) => { e.stopPropagation(); setIsPdfModalOpen(true); }}\r\n                                    className=\"neu-tag text-xs flex items-center gap-1 hover:scale-105 transition-transform\"\r\n                                >\r\n                                    <SvgIcon name=\"file-text\" size={14} style={{ color: 'var(--color-success)' }} />\r\n                                    <span style={{ color: 'var(--color-text)' }}>Pokaż ulotkę PDF</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={(e) => { e.stopPropagation(); handleRemoveLeaflet(); }}\r\n                                    className=\"neu-tag text-xs flex items-center gap-1\"\r\n                                    title=\"Odepnij ulotkę\"\r\n                                >\r\n                                    <SvgIcon name=\"pin-off\" size={14} style={{ color: 'var(--color-error)' }} />\r\n                                    <span style={{ color: 'var(--color-text)' }}>Odepnij</span>\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"mt-1\">\r\n                                {!isSearchingLeaflet ? (\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); handleOpenLeafletSearch(); }}\r\n                                        className=\"neu-tag text-xs flex items-center gap-1\"\r\n                                        title=\"Wyszukaj ulotkę w Rejestrze Produktów Leczniczych\"\r\n                                    >\r\n                                        <SvgIcon name=\"file-search\" size={14} style={{ color: 'var(--color-text)' }} />\r\n                                        <span style={{ color: 'var(--color-text)' }}>Znajdź i podepnij ulotkę</span>\r\n                                    </button>\r\n                                ) : (\r\n                                    <div\r\n                                        className=\"rounded-lg p-3 animate-fadeIn\"\r\n                                        style={{ background: 'var(--color-bg-dark)', opacity: 0.95 }}\r\n                                        onClick={(e) => e.stopPropagation()}\r\n                                    >\r\n                                        <div className=\"flex justify-between items-center mb-2\">\r\n                                            <span className=\"text-xs font-bold\" style={{ color: 'var(--color-text)' }}>\r\n                                                Szukaj w bazie MZ:\r\n                                            </span>\r\n                                            <button\r\n                                                onClick={() => { setIsSearchingLeaflet(false); setLeafletSearchResults([]); setLeafletSearchQuery(''); }}\r\n                                                className=\"neu-tag text-xs flex items-center gap-1\"\r\n                                            >\r\n                                                <SvgIcon name=\"x\" size={12} style={{ color: 'var(--color-error)' }} />\r\n                                                <span style={{ color: 'var(--color-text)' }}>Anuluj</span>\r\n                                            </button>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex gap-2 mb-2\">\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={leafletSearchQuery}\r\n                                                onChange={(e) => setLeafletSearchQuery(e.target.value)}\r\n                                                onKeyDown={(e) => { if (e.key === 'Enter') handleSearchLeaflet(); }}\r\n                                                placeholder=\"Wpisz nazwę leku...\"\r\n                                                className=\"neu-input flex-1 text-xs\"\r\n                                                style={{ padding: '0.5rem' }}\r\n                                            />\r\n                                            <button\r\n                                                onClick={() => handleSearchLeaflet()}\r\n                                                disabled={leafletSearchQuery.trim().length < 3 || leafletLoading}\r\n                                                className=\"neu-tag text-xs\"\r\n                                            >\r\n                                                {leafletLoading ? <SvgIcon name=\"loader\" size={14} /> : <SvgIcon name=\"search\" size={14} style={{ color: 'var(--color-text)' }} />}\r\n                                            </button>\r\n                                        </div>\r\n\r\n                                        {leafletLoading && (\r\n                                            <div className=\"text-xs p-2\" style={{ color: 'var(--color-text-muted)' }}>\r\n                                                Szukanie w Rejestrze Produktów Leczniczych...\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {!leafletLoading && leafletSearchResults.length === 0 && leafletSearchQuery.trim().length >= 3 && (\r\n                                            <div className=\"text-xs p-2\" style={{ color: 'var(--color-text-muted)' }}>\r\n                                                Nie znaleziono - spróbuj inną nazwę lub tylko pierwsze słowo.\r\n                                                <br />\r\n                                                <span style={{ fontSize: '0.65rem' }}>Uwaga: suplementy diety nie są w Rejestrze Produktów Leczniczych.</span>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {!leafletLoading && leafletSearchResults.length > 0 && (\r\n                                            <div className=\"max-h-40 overflow-y-auto space-y-1.5 p-1 custom-scrollbar\">\r\n                                                {leafletSearchResults.map((res) => (\r\n                                                    <button\r\n                                                        key={res.id}\r\n                                                        onClick={() => handleSelectLeaflet(res.ulotkaUrl)}\r\n                                                        className=\"w-full text-left text-xs p-2 rounded transition-colors flex justify-between group neu-tag\"\r\n                                                    >\r\n                                                        <span style={{ color: 'var(--color-text)' }}>\r\n                                                            {res.nazwa}{' '}\r\n                                                            <span style={{ opacity: 0.7 }}>\r\n                                                                ({res.moc}{res.postac ? `, ${res.postac}` : ''})\r\n                                                            </span>\r\n                                                        </span>\r\n                                                        <span className=\"hidden group-hover:inline\" style={{ color: 'var(--color-accent)' }}>\r\n                                                            <SvgIcon name=\"plus\" size={14} />\r\n                                                        </span>\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Wskazania */}\r\n                    <div className=\"mb-3\">\r\n                        <span className=\"text-xs font-medium\" style={{ color: 'var(--color-text-muted)' }}>Wskazania:</span>\r\n                        <ul className=\"mt-1 list-inside list-disc text-sm\" style={{ color: 'var(--color-text)' }}>\r\n                            {medicine.wskazania.map((wskazanie, i) => (\r\n                                <li key={i}>{wskazanie}</li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n\r\n                    {/* Tagi */}\r\n                    <div className=\"mb-3 flex flex-wrap gap-1.5 px-1\">\r\n                        {medicine.tagi.map((tag, i) => (\r\n                            <span\r\n                                key={i}\r\n                                className=\"neu-tag text-xs\"\r\n                                style={{\r\n                                    color: 'var(--color-text)',\r\n                                    padding: '0.25rem 0.625rem'\r\n                                }}\r\n                            >\r\n                                {tag}\r\n                            </span>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Etykiety użytkownika - POZA overflow-hidden, aby dropdown był widoczny */}\r\n                {!isCollapsed && (\r\n                    <div className=\"mb-4 px-1\">\r\n                        <LabelSelector\r\n                            selectedLabelIds={medicine.labels || []}\r\n                            onChange={(labelIds) => onUpdateLabels(medicine.id, labelIds)}\r\n                            buttonPosition=\"right\"\r\n                        />\r\n                    </div>\r\n                )}\r\n\r\n                {/* Sekcje poniżej etykiet - ukryte gdy zwinięte */}\r\n                {!isCollapsed && (\r\n                    <>\r\n                        {/* Separator przed notatką */}\r\n                        <div className=\"pt-3 mb-3 pr-1\" style={{ borderTop: '1px solid var(--shadow-dark)' }}>\r\n                            <div className=\"flex items-start justify-between gap-3\">\r\n                                <div className=\"flex-1\">\r\n                                    <span className=\"text-xs font-medium\" style={{ color: 'var(--color-text-muted)' }}>Notatka:</span>\r\n                                    {!isEditingNote ? (\r\n                                        <p className=\"mt-1 text-sm\" style={{ color: medicine.notatka ? 'var(--color-text)' : 'var(--color-text-muted)' }}>\r\n                                            {medicine.notatka || 'Brak notatki'}\r\n                                        </p>\r\n                                    ) : (\r\n                                        <textarea\r\n                                            value={noteText}\r\n                                            onChange={(e) => setNoteText(e.target.value)}\r\n                                            onClick={(e) => e.stopPropagation()}\r\n                                            className=\"neu-input mt-1 text-sm w-full resize-none\"\r\n                                            style={{ padding: '0.5rem', fontSize: '0.875rem', minHeight: '4rem' }}\r\n                                            placeholder=\"Dodaj notatkę...\"\r\n                                            maxLength={500}\r\n                                            autoFocus\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n\r\n                                {!isEditingNote ? (\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); setIsEditingNote(true); setNoteText(medicine.notatka || ''); }}\r\n                                        className=\"neu-tag text-xs flex-shrink-0 flex items-center gap-1 group/btn\"\r\n                                        style={{ color: 'var(--color-text)' }}\r\n                                    >\r\n                                        <SvgIcon name=\"file-pen-line\" size={14} />\r\n                                        <span className=\"group-hover/btn:text-[var(--color-accent)] transition-colors\">Edytuj notkę</span>\r\n                                    </button>\r\n                                ) : (\r\n                                    <div className=\"flex gap-2 flex-shrink-0\">\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); handleSaveNote(); }}\r\n                                            className=\"neu-tag text-xs\"\r\n                                            style={{ color: 'var(--color-success)' }}\r\n                                        >\r\n                                            Zapisz\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); setIsEditingNote(false); }}\r\n                                            className=\"neu-tag text-xs\"\r\n                                        >\r\n                                            Anuluj\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Termin ważności */}\r\n                        <div className=\"pt-3 pr-1\" style={{ borderTop: '1px solid var(--shadow-dark)' }}>\r\n                            <div className=\"flex items-start justify-between\">\r\n                                <div className=\"flex-1\">\r\n                                    {/* Linia 1: Nagłówek z ikoną statusu */}\r\n                                    <div className=\"flex items-center gap-1.5 mb-1\">\r\n                                        <span className=\"text-xs font-medium\" style={{ color: 'var(--color-text-muted)' }}>Termin ważności:</span>\r\n                                        {statusIcons[expiryStatus]}\r\n                                    </div>\r\n                                    {/* Linia 2: Data i tekst statusu */}\r\n                                    {!isEditing ? (\r\n                                        <div className=\"flex items-center gap-2 flex-wrap\">\r\n                                            <span className=\"text-sm font-semibold\" style={{ color: 'var(--color-text)' }}>{formatDate(medicine.terminWaznosci)}</span>\r\n                                            <span className=\"text-xs\" style={{ color: 'var(--color-text-muted)' }}>{statusTexts[expiryStatus]}</span>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <input\r\n                                            type=\"date\"\r\n                                            value={expiryDate}\r\n                                            onChange={(e) => setExpiryDate(e.target.value)}\r\n                                            onClick={(e) => e.stopPropagation()}\r\n                                            className=\"neu-input text-sm\"\r\n                                            style={{ padding: '0.5rem', fontSize: '0.875rem' }}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n\r\n                                {!isEditing ? (\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); setIsEditing(true); }}\r\n                                        className=\"neu-tag text-xs flex items-center gap-1 group/btn\"\r\n                                        style={{ color: 'var(--color-text)' }}\r\n                                    >\r\n                                        <SvgIcon name=\"calendar-sync\" size={14} />\r\n                                        <span className=\"group-hover/btn:text-[var(--color-accent)] transition-colors\">Edytuj datę</span>\r\n                                    </button>\r\n                                ) : (\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); handleSaveExpiry(); }}\r\n                                            className=\"neu-tag text-xs\"\r\n                                            style={{ color: 'var(--color-success)' }}\r\n                                        >\r\n                                            Zapisz\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); setIsEditing(false); }}\r\n                                            className=\"neu-tag text-xs\"\r\n                                        >\r\n                                            Anuluj\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        {/* Footer: Data dodania + Usuń */}\r\n                        <div className=\"flex items-center justify-between mt-3 pr-1\">\r\n                            <span className=\"text-xs\" style={{ color: 'var(--color-text-muted)' }}>\r\n                                Dodano: {formatDate(medicine.dataDodania)}\r\n                            </span>\r\n                            <button\r\n                                onClick={(e) => { e.stopPropagation(); onDelete(medicine.id); }}\r\n                                className=\"neu-tag text-xs hover:scale-105 transition-all flex items-center gap-1 group/del\"\r\n                                title=\"Usuń lek\"\r\n                                aria-label=\"Usuń lek\"\r\n                            >\r\n                                <SvgIcon name=\"trash\" size={14} style={{ color: 'var(--color-error)' }} />\r\n                                <span className=\"group-hover/del:text-[var(--color-error)] transition-colors\" style={{ color: 'var(--color-text)' }}>Usuń lek</span>\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </article>\r\n\r\n            {/* Modal z podglądem PDF */}\r\n            {\r\n                isPdfModalOpen && medicine.leafletUrl && (\r\n                    <PdfModal\r\n                        url={medicine.leafletUrl}\r\n                        title={medicine.nazwa || 'Ulotka leku'}\r\n                        onClose={() => setIsPdfModalOpen(false)}\r\n                    />\r\n                )\r\n            }\r\n        </>\r\n    );\r\n}\r\n","// src/lib/labelStorage.ts\r\n// Zarządzanie etykietami użytkownika w localStorage\r\n\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport type { UserLabel, LabelColor } from './types';\r\nimport { MAX_LABELS_GLOBAL } from './types';\r\n\r\nconst LABELS_STORAGE_KEY = 'appteczka_labels';\r\n\r\n/**\r\n * Pobiera wszystkie etykiety z localStorage\r\n */\r\nexport function getLabels(): UserLabel[] {\r\n    if (typeof window === 'undefined') return [];\r\n\r\n    try {\r\n        const stored = localStorage.getItem(LABELS_STORAGE_KEY);\r\n        if (!stored) return [];\r\n\r\n        const parsed = JSON.parse(stored);\r\n        return Array.isArray(parsed) ? parsed : [];\r\n    } catch {\r\n        console.error('Błąd odczytu etykiet z localStorage');\r\n        return [];\r\n    }\r\n}\r\n\r\n/**\r\n * Zapisuje listę etykiet do localStorage\r\n */\r\nexport function saveLabels(labels: UserLabel[]): void {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    try {\r\n        localStorage.setItem(LABELS_STORAGE_KEY, JSON.stringify(labels));\r\n    } catch {\r\n        console.error('Błąd zapisu etykiet do localStorage');\r\n    }\r\n}\r\n\r\n/**\r\n * Tworzy nową etykietę\r\n * @returns null jeśli przekroczono limit\r\n */\r\nexport function createLabel(name: string, color: LabelColor): UserLabel | null {\r\n    const labels = getLabels();\r\n\r\n    if (labels.length >= MAX_LABELS_GLOBAL) {\r\n        return null;\r\n    }\r\n\r\n    // Sprawdź duplikat nazwy\r\n    if (labels.some(l => l.name.toLowerCase() === name.toLowerCase())) {\r\n        return null;\r\n    }\r\n\r\n    const newLabel: UserLabel = {\r\n        id: uuidv4(),\r\n        name: name.trim(),\r\n        color\r\n    };\r\n\r\n    labels.push(newLabel);\r\n    saveLabels(labels);\r\n\r\n    return newLabel;\r\n}\r\n\r\n/**\r\n * Aktualizuje etykietę\r\n */\r\nexport function updateLabel(id: string, updates: Partial<Omit<UserLabel, 'id'>>): UserLabel | null {\r\n    const labels = getLabels();\r\n    const index = labels.findIndex(l => l.id === id);\r\n\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n\r\n    // Sprawdź duplikat nazwy (jeśli zmieniana)\r\n    if (updates.name) {\r\n        const duplicate = labels.find(l =>\r\n            l.id !== id && l.name.toLowerCase() === updates.name!.toLowerCase()\r\n        );\r\n        if (duplicate) return null;\r\n    }\r\n\r\n    labels[index] = { ...labels[index], ...updates };\r\n    saveLabels(labels);\r\n\r\n    return labels[index];\r\n}\r\n\r\n/**\r\n * Usuwa etykietę oraz czyści referencje do niej ze wszystkich leków\r\n */\r\nexport function deleteLabel(id: string): boolean {\r\n    const labels = getLabels();\r\n    const filtered = labels.filter(l => l.id !== id);\r\n\r\n    if (filtered.length === labels.length) {\r\n        return false;\r\n    }\r\n\r\n    saveLabels(filtered);\r\n\r\n    // Usuń referencje do tej etykiety ze wszystkich leków\r\n    removeLabelFromAllMedicines(id);\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n * Usuwa referencję do etykiety ze wszystkich leków\r\n */\r\nfunction removeLabelFromAllMedicines(labelId: string): void {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    try {\r\n        const stored = localStorage.getItem('appteczka_medicines');\r\n        if (!stored) return;\r\n\r\n        const data = JSON.parse(stored);\r\n        if (!data.leki || !Array.isArray(data.leki)) return;\r\n\r\n        let modified = false;\r\n\r\n        for (const medicine of data.leki) {\r\n            if (medicine.labels && Array.isArray(medicine.labels)) {\r\n                const originalLength = medicine.labels.length;\r\n                medicine.labels = medicine.labels.filter((lid: string) => lid !== labelId);\r\n                if (medicine.labels.length !== originalLength) {\r\n                    modified = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (modified) {\r\n            localStorage.setItem('appteczka_medicines', JSON.stringify(data));\r\n            // Emit event to notify components\r\n            window.dispatchEvent(new Event('medicinesUpdated'));\r\n        }\r\n    } catch (error) {\r\n        console.error('Błąd usuwania etykiety z leków:', error);\r\n    }\r\n}\r\n\r\n/**\r\n * Pobiera etykietę po ID\r\n */\r\nexport function getLabelById(id: string): UserLabel | undefined {\r\n    const labels = getLabels();\r\n    return labels.find(l => l.id === id);\r\n}\r\n\r\n/**\r\n * Pobiera wiele etykiet po ID\r\n */\r\nexport function getLabelsByIds(ids: string[]): UserLabel[] {\r\n    const labels = getLabels();\r\n    return labels.filter(l => ids.includes(l.id));\r\n}\r\n\r\n/**\r\n * Eksportuje etykiety (do backupu)\r\n */\r\nexport function exportLabels(): string {\r\n    const labels = getLabels();\r\n    return JSON.stringify({ labels }, null, 2);\r\n}\r\n\r\n/**\r\n * Importuje etykiety z backupu\r\n */\r\nexport function importLabels(data: { labels?: UserLabel[] }): number {\r\n    if (!data.labels || !Array.isArray(data.labels)) {\r\n        return 0;\r\n    }\r\n\r\n    const existingLabels = getLabels();\r\n    let imported = 0;\r\n\r\n    for (const label of data.labels) {\r\n        // Pomiń istniejące (po nazwie)\r\n        if (existingLabels.some(l => l.name.toLowerCase() === label.name.toLowerCase())) {\r\n            continue;\r\n        }\r\n\r\n        if (existingLabels.length >= MAX_LABELS_GLOBAL) {\r\n            break;\r\n        }\r\n\r\n        existingLabels.push({\r\n            id: label.id || uuidv4(),\r\n            name: label.name,\r\n            color: label.color || 'gray'\r\n        });\r\n        imported++;\r\n    }\r\n\r\n    saveLabels(existingLabels);\r\n    return imported;\r\n}\r\n","'use client';\r\n\r\n// src/components/LabelSelector.tsx\r\n// Wybór etykiet dla pojedynczego leku (dropdown z checkboxami)\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport type { UserLabel, LabelColor } from '@/lib/types';\r\nimport { LABEL_COLORS, MAX_LABELS_PER_MEDICINE, MAX_LABELS_GLOBAL } from '@/lib/types';\r\nimport { getLabels, createLabel, getLabelsByIds } from '@/lib/labelStorage';\r\nimport { SvgIcon } from './SvgIcon';\r\n\r\ninterface LabelSelectorProps {\r\n    selectedLabelIds: string[];\r\n    onChange: (labelIds: string[]) => void;\r\n    onLabelsCreated?: () => void;\r\n    buttonPosition?: 'left' | 'right';\r\n}\r\n\r\nexport default function LabelSelector({ selectedLabelIds, onChange, onLabelsCreated, buttonPosition = 'left' }: LabelSelectorProps) {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [labels, setLabels] = useState<UserLabel[]>([]);\r\n    const [isCreating, setIsCreating] = useState(false);\r\n    const [newName, setNewName] = useState('');\r\n    const [newColor, setNewColor] = useState<LabelColor>('green');\r\n    const [error, setError] = useState('');\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Załaduj etykiety\r\n    useEffect(() => {\r\n        setLabels(getLabels());\r\n    }, [isOpen]);\r\n\r\n    // Zamknij dropdown przy kliknięciu na zewnątrz\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n                setIsCreating(false);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const selectedLabels = getLabelsByIds(selectedLabelIds);\r\n    const canAddMore = selectedLabelIds.length < MAX_LABELS_PER_MEDICINE;\r\n\r\n    const handleToggle = (labelId: string) => {\r\n        if (selectedLabelIds.includes(labelId)) {\r\n            onChange(selectedLabelIds.filter(id => id !== labelId));\r\n        } else if (canAddMore) {\r\n            onChange([...selectedLabelIds, labelId]);\r\n        }\r\n    };\r\n\r\n    const handleCreate = () => {\r\n        setError('');\r\n\r\n        if (!newName.trim()) {\r\n            setError('Nazwa jest wymagana');\r\n            return;\r\n        }\r\n\r\n        if (labels.length >= MAX_LABELS_GLOBAL) {\r\n            setError(`Limit ${MAX_LABELS_GLOBAL} etykiet`);\r\n            return;\r\n        }\r\n\r\n        const result = createLabel(newName.trim(), newColor);\r\n\r\n        if (!result) {\r\n            setError('Etykieta już istnieje');\r\n            return;\r\n        }\r\n\r\n        setLabels(getLabels());\r\n        setNewName('');\r\n        setNewColor('green');\r\n        setIsCreating(false);\r\n        onLabelsCreated?.();\r\n\r\n        // Powiadom inne komponenty o nowej etykiecie\r\n        window.dispatchEvent(new CustomEvent('labelsUpdated'));\r\n\r\n        // Automatycznie zaznacz nową etykietę\r\n        if (canAddMore) {\r\n            onChange([...selectedLabelIds, result.id]);\r\n        }\r\n    };\r\n\r\n    const colorOptions = Object.entries(LABEL_COLORS) as [LabelColor, typeof LABEL_COLORS[LabelColor]][];\r\n\r\n    return (\r\n        <div className={`relative ${buttonPosition === 'right' ? 'flex flex-wrap items-start justify-between gap-2 pr-1' : ''}`} ref={dropdownRef}>\r\n            {/* Wyświetlanie wybranych etykiet - przed przyciskiem gdy buttonPosition='right' */}\r\n            {buttonPosition === 'right' && (\r\n                <div className=\"flex flex-wrap gap-1 p-1 flex-1 min-h-[28px]\">\r\n                    {selectedLabels.map(label => (\r\n                        <span\r\n                            key={label.id}\r\n                            className=\"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full\"\r\n                            style={{\r\n                                backgroundColor: LABEL_COLORS[label.color].hex,\r\n                                color: 'white',\r\n                                boxShadow: '2px 2px 4px rgba(0,0,0,0.15), -2px -2px 4px rgba(255,255,255,0.1)'\r\n                            }}\r\n                        >\r\n                            {label.name}\r\n                            <button\r\n                                onClick={(e) => { e.stopPropagation(); handleToggle(label.id); }}\r\n                                className=\"opacity-70 hover:opacity-100\"\r\n                            >\r\n                                ×\r\n                            </button>\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Przycisk otwierający */}\r\n            <div className={buttonPosition === 'right' ? 'flex-shrink-0' : ''}>\r\n                <button\r\n                    onClick={(e) => { e.stopPropagation(); setIsOpen(!isOpen); }}\r\n                    className=\"neu-tag text-xs flex items-center gap-1\"\r\n                    style={{ color: 'var(--color-text)' }}\r\n                >\r\n                    <SvgIcon name=\"tags\" size={14} style={{ color: 'var(--color-accent)' }} /> Etykiety\r\n                    {selectedLabels.length > 0 && (\r\n                        <span className=\"ml-1 px-1.5 py-0.5 rounded-full text-white text-xs\"\r\n                            style={{ backgroundColor: 'var(--color-accent)' }}>\r\n                            {selectedLabels.length}\r\n                        </span>\r\n                    )}\r\n                </button>\r\n\r\n                {/* Dropdown */}\r\n                {isOpen && (\r\n                    <div\r\n                        className={`absolute ${buttonPosition === 'right' ? 'right-0' : 'left-0'} bottom-full mb-1 z-[200] neu-flat p-3 pr-4 min-w-[200px] animate-popIn`}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                    >\r\n                        {/* Limit info */}\r\n                        {!canAddMore && (\r\n                            <p className=\"text-xs mb-2\" style={{ color: 'var(--color-warning)' }}>\r\n                                Max {MAX_LABELS_PER_MEDICINE} etykiet na lek\r\n                            </p>\r\n                        )}\r\n\r\n                        {/* Lista etykiet */}\r\n                        {labels.length > 0 ? (\r\n                            <div className=\"space-y-1.5 mb-2\">\r\n                                {labels.map(label => {\r\n                                    const isSelected = selectedLabelIds.includes(label.id);\r\n                                    const isDisabled = !isSelected && !canAddMore;\r\n\r\n                                    return (\r\n                                        <button\r\n                                            key={label.id}\r\n                                            onClick={() => !isDisabled && handleToggle(label.id)}\r\n                                            className={`w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-left text-xs transition-all ${isSelected ? 'neu-tag active' : 'neu-tag'\r\n                                                } ${isDisabled ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                                            disabled={isDisabled}\r\n                                        >\r\n                                            <span\r\n                                                className=\"w-3 h-3 rounded-full flex-shrink-0\"\r\n                                                style={{ backgroundColor: LABEL_COLORS[label.color].hex }}\r\n                                            />\r\n                                            <span className={isSelected ? 'text-white' : ''}>{label.name}</span>\r\n                                            {isSelected && <span className=\"ml-auto\">✓</span>}\r\n                                        </button>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        ) : !isCreating && (\r\n                            <p className=\"text-xs mb-2\" style={{ color: 'var(--color-text-muted)' }}>\r\n                                Brak etykiet\r\n                            </p>\r\n                        )}\r\n\r\n                        {/* Formularz tworzenia */}\r\n                        {isCreating ? (\r\n                            <div className=\"space-y-2 pt-2\" style={{ borderTop: '1px solid var(--shadow-dark)' }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={newName}\r\n                                    onChange={(e) => setNewName(e.target.value)}\r\n                                    placeholder=\"Nazwa...\"\r\n                                    className=\"neu-input text-xs w-full\"\r\n                                    style={{ padding: '0.375rem' }}\r\n                                    maxLength={20}\r\n                                    autoFocus\r\n                                    onKeyDown={(e) => e.key === 'Enter' && handleCreate()}\r\n                                />\r\n                                <div className=\"flex flex-wrap gap-1\">\r\n                                    {colorOptions.map(([key, value]) => (\r\n                                        <button\r\n                                            key={key}\r\n                                            onClick={() => setNewColor(key)}\r\n                                            className={`w-5 h-5 rounded-full ${newColor === key ? 'ring-2 ring-offset-1' : ''}`}\r\n                                            style={{ backgroundColor: value.hex }}\r\n                                            title={value.name}\r\n                                        />\r\n                                    ))}\r\n                                </div>\r\n                                {error && <p className=\"text-xs\" style={{ color: 'var(--color-error)' }}>{error}</p>}\r\n                                <div className=\"flex gap-1\">\r\n                                    <button onClick={handleCreate} className=\"neu-tag text-xs\" style={{ color: 'var(--color-success)' }}>Zapisz</button>\r\n                                    <button onClick={() => { setIsCreating(false); setError(''); }} className=\"neu-tag text-xs\">Anuluj</button>\r\n                                </div>\r\n                            </div>\r\n                        ) : labels.length < MAX_LABELS_GLOBAL && (\r\n                            <button\r\n                                onClick={() => setIsCreating(true)}\r\n                                className=\"w-full neu-tag text-xs mt-1\"\r\n                                style={{ color: 'var(--color-accent)' }}\r\n                            >\r\n                                + Nowa etykieta\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Wyświetlanie wybranych etykiet (po przycisku) - tylko gdy buttonPosition='left' */}\r\n            {\r\n                buttonPosition === 'left' && selectedLabels.length > 0 && !isOpen && (\r\n                    <div className=\"flex flex-wrap gap-1 mt-1.5\">\r\n                        {selectedLabels.map(label => (\r\n                            <span\r\n                                key={label.id}\r\n                                className=\"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full\"\r\n                                style={{\r\n                                    backgroundColor: LABEL_COLORS[label.color].hex,\r\n                                    color: 'white',\r\n                                    boxShadow: '2px 2px 4px rgba(0,0,0,0.15), -2px -2px 4px rgba(255,255,255,0.1)'\r\n                                }}\r\n                            >\r\n                                {label.name}\r\n                                <button\r\n                                    onClick={(e) => { e.stopPropagation(); handleToggle(label.id); }}\r\n                                    className=\"opacity-70 hover:opacity-100\"\r\n                                >\r\n                                    ×\r\n                                </button>\r\n                            </span>\r\n                        ))}\r\n                    </div>\r\n                )\r\n            }\r\n        </div >\r\n    );\r\n}\r\n","'use client';\r\n\r\n// src/components/PdfModal.tsx\r\n// Modal z podglądem PDF w iframe - Neumorphism Style\r\n// Używa React Portal aby renderować nad całą stroną\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\ninterface PdfModalProps {\r\n    url: string;\r\n    title: string;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function PdfModal({ url, title, onClose }: PdfModalProps) {\r\n    const [mounted, setMounted] = useState(false);\r\n    const [pdfError, setPdfError] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Proxy URL do omijania blokad X-Frame-Options\r\n    const proxyUrl = `/api/pdf-proxy?url=${encodeURIComponent(url)}`;\r\n\r\n    // Montuj portal po stronie klienta\r\n    useEffect(() => {\r\n        setMounted(true);\r\n        // Blokuj scroll na body gdy modal jest otwarty\r\n        document.body.style.overflow = 'hidden';\r\n        return () => {\r\n            document.body.style.overflow = '';\r\n        };\r\n    }, []);\r\n\r\n    // Zamknij na Escape\r\n    useEffect(() => {\r\n        const handleEscape = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') onClose();\r\n        };\r\n        window.addEventListener('keydown', handleEscape);\r\n        return () => window.removeEventListener('keydown', handleEscape);\r\n    }, [onClose]);\r\n\r\n    // Sprawdź czy PDF proxy działa\r\n    useEffect(() => {\r\n        const checkPdf = async () => {\r\n            try {\r\n                const res = await fetch(proxyUrl, { method: 'HEAD' });\r\n                if (!res.ok) {\r\n                    setPdfError(true);\r\n                }\r\n            } catch {\r\n                setPdfError(true);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        checkPdf();\r\n    }, [proxyUrl]);\r\n\r\n    if (!mounted) return null;\r\n\r\n    const modalContent = (\r\n        <div\r\n            className=\"fixed inset-0 flex items-center justify-center p-2 sm:p-4 animate-fadeIn\"\r\n            style={{\r\n                backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n                zIndex: 9999\r\n            }}\r\n            onClick={onClose}\r\n        >\r\n            <div\r\n                className=\"neu-flat w-full max-w-5xl h-[95vh] sm:h-[90vh] flex flex-col animate-popIn\"\r\n                style={{ maxHeight: 'calc(100vh - 1rem)' }}\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n                {/* Header - responsywny */}\r\n                <div className=\"p-3 sm:p-4 border-b\" style={{ borderColor: 'var(--shadow-dark)' }}>\r\n                    {/* Tytuł i zamknij w jednym wierszu */}\r\n                    <div className=\"flex items-center justify-between gap-2 mb-2 sm:mb-0\">\r\n                        <h2 className=\"text-sm sm:text-lg font-semibold truncate flex-1\" style={{ color: 'var(--color-text)' }}>\r\n                            📄 {title}\r\n                        </h2>\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"neu-tag text-lg px-3 py-1 flex-shrink-0\"\r\n                            style={{ color: 'var(--color-error)' }}\r\n                            title=\"Zamknij (Esc)\"\r\n                        >\r\n                            ✕\r\n                        </button>\r\n                    </div>\r\n                    {/* Przyciski akcji - osobny wiersz na mobile */}\r\n                    <div className=\"flex items-center gap-2 flex-wrap\">\r\n                        <a\r\n                            href={url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"neu-tag text-xs\"\r\n                            style={{ color: 'var(--color-accent)' }}\r\n                        >\r\n                            🔗 Otwórz w RPL\r\n                        </a>\r\n                        <a\r\n                            href={proxyUrl}\r\n                            download={`${title}.pdf`}\r\n                            className=\"neu-tag text-xs\"\r\n                            style={{ color: 'var(--color-accent)' }}\r\n                        >\r\n                            📥 Pobierz PDF\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* PDF iframe lub komunikat błędu */}\r\n                <div className=\"flex-1 p-2 min-h-0 flex items-center justify-center\">\r\n                    {loading && (\r\n                        <div className=\"text-center\" style={{ color: 'var(--color-text-muted)' }}>\r\n                            <div className=\"text-2xl mb-2\">⏳</div>\r\n                            <p>Ładowanie ulotki...</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {!loading && pdfError && (\r\n                        <div className=\"text-center p-4\" style={{ color: 'var(--color-text)' }}>\r\n                            <div className=\"text-4xl mb-4\">📄</div>\r\n                            <p className=\"mb-4\">Nie można wyświetlić podglądu ulotki.</p>\r\n                            <p className=\"text-sm mb-4\" style={{ color: 'var(--color-text-muted)' }}>\r\n                                Użyj przycisków powyżej, aby otworzyć lub pobrać PDF.\r\n                            </p>\r\n                            <a\r\n                                href={url}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"neu-button inline-block px-6 py-3\"\r\n                                style={{ color: 'var(--color-accent)' }}\r\n                            >\r\n                                🔗 Otwórz w Rejestrze MZ\r\n                            </a>\r\n                        </div>\r\n                    )}\r\n\r\n                    {!loading && !pdfError && (\r\n                        <iframe\r\n                            src={proxyUrl}\r\n                            className=\"w-full h-full rounded-lg\"\r\n                            style={{\r\n                                backgroundColor: 'white',\r\n                                border: 'none'\r\n                            }}\r\n                            title={title}\r\n                            onError={() => setPdfError(true)}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    // Renderuj portal na document.body\r\n    return createPortal(modalContent, document.body);\r\n}\r\n\r\n","/* __next_internal_action_entry_do_not_use__ [{\"409a5b36d98edf6e2d19becca7033c7bd03c5b2984\":\"searchMedicineInRpl\"},\"apps/web/src/actions/rplActions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"409a5b36d98edf6e2d19becca7033c7bd03c5b2984\",callServer,void 0,findSourceMapURL,\"searchMedicineInRpl\");export{$$RSC_SERVER_ACTION_0 as searchMedicineInRpl};","'use client';\r\n\r\n// src/components/MedicineList.tsx\r\n// Lista/siatka kart leków - Neumorphism Style z toggle widoku\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport type { Medicine, FilterState } from '@/lib/types';\r\nimport MedicineCard from './MedicineCard';\r\nimport { SvgIcon } from './SvgIcon';\r\n\r\ntype SortOption = 'nazwa' | 'dataDodania' | 'terminWaznosci';\r\ntype SortDirection = 'asc' | 'desc';\r\n\r\ninterface MedicineListProps {\r\n    medicines: Medicine[];\r\n    filters: FilterState;\r\n    onDelete: (id: string) => void;\r\n    onUpdateExpiry: (id: string, date: string | undefined) => void;\r\n    onUpdateLabels: (id: string, labelIds: string[]) => void;\r\n    onUpdateNote: (id: string, note: string | undefined) => void;\r\n    onUpdateLeaflet: (id: string, url: string | undefined) => void;\r\n    totalCount: number;\r\n    sortBy: SortOption;\r\n    sortDir: SortDirection;\r\n    onSortChange: (option: SortOption) => void;\r\n}\r\n\r\ntype ViewMode = 'grid' | 'list';\r\n\r\n/**\r\n * Sprawdza status terminu ważności\r\n */\r\nfunction getExpiryStatus(terminWaznosci?: string): 'expired' | 'expiring-soon' | 'valid' | 'unknown' {\r\n    if (!terminWaznosci) return 'unknown';\r\n\r\n    const today = new Date();\r\n    const expiry = new Date(terminWaznosci);\r\n    const daysUntilExpiry = Math.ceil((expiry.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n    if (daysUntilExpiry < 0) return 'expired';\r\n    if (daysUntilExpiry <= 30) return 'expiring-soon';\r\n    return 'valid';\r\n}\r\n\r\n/**\r\n * Filtruje leki według aktywnych filtrów\r\n */\r\nfunction filterMedicines(medicines: Medicine[], filters: FilterState): Medicine[] {\r\n    return medicines.filter(medicine => {\r\n        // Filtr tekstowy\r\n        if (filters.search) {\r\n            const searchLower = filters.search.toLowerCase();\r\n            const matchesSearch =\r\n                (medicine.nazwa?.toLowerCase().includes(searchLower) ?? false) ||\r\n                medicine.opis.toLowerCase().includes(searchLower) ||\r\n                medicine.wskazania.some(w => w.toLowerCase().includes(searchLower)) ||\r\n                medicine.tagi.some(t => t.toLowerCase().includes(searchLower));\r\n\r\n            if (!matchesSearch) return false;\r\n        }\r\n\r\n        // Filtr tagów\r\n        if (filters.tags.length > 0) {\r\n            const hasAllTags = filters.tags.every(tag =>\r\n                medicine.tagi.includes(tag)\r\n            );\r\n            if (!hasAllTags) return false;\r\n        }\r\n\r\n        // Filtr etykiet użytkownika\r\n        if (filters.labels.length > 0) {\r\n            const medicineLabels = medicine.labels || [];\r\n            const hasAllLabels = filters.labels.every(labelId =>\r\n                medicineLabels.includes(labelId)\r\n            );\r\n            if (!hasAllLabels) return false;\r\n        }\r\n\r\n        // Filtr terminu ważności\r\n        if (filters.expiry !== 'all') {\r\n            const status = getExpiryStatus(medicine.terminWaznosci);\r\n\r\n            switch (filters.expiry) {\r\n                case 'expired':\r\n                    if (status !== 'expired') return false;\r\n                    break;\r\n                case 'expiring-soon':\r\n                    if (status !== 'expiring-soon') return false;\r\n                    break;\r\n                case 'valid':\r\n                    if (status !== 'valid') return false;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    });\r\n}\r\n\r\nexport default function MedicineList({ medicines, filters, onDelete, onUpdateExpiry, onUpdateLabels, onUpdateNote, onUpdateLeaflet, totalCount, sortBy, sortDir, onSortChange }: MedicineListProps) {\r\n    const [viewMode, setViewMode] = useState<ViewMode>('grid');\r\n    const [collapsedCards, setCollapsedCards] = useState<Set<string>>(new Set());\r\n\r\n    // Załaduj viewMode z localStorage\r\n    useEffect(() => {\r\n        const savedMode = localStorage.getItem('medicineListViewMode') as ViewMode;\r\n        if (savedMode === 'grid' || savedMode === 'list') {\r\n            setViewMode(savedMode);\r\n        }\r\n    }, []);\r\n\r\n    // Zapisz viewMode do localStorage\r\n    useEffect(() => {\r\n        localStorage.setItem('medicineListViewMode', viewMode);\r\n    }, [viewMode]);\r\n\r\n    const filteredMedicines = filterMedicines(medicines, filters);\r\n\r\n    // Toggle collapse dla pojedynczej karty\r\n    const toggleCollapse = (id: string) => {\r\n        setCollapsedCards(prev => {\r\n            const newSet = new Set(prev);\r\n            if (newSet.has(id)) {\r\n                newSet.delete(id);\r\n            } else {\r\n                newSet.add(id);\r\n            }\r\n            return newSet;\r\n        });\r\n    };\r\n\r\n    // Sprawdzanie czy karta jest zwinięta (w widoku lista domyślnie zwinięte)\r\n    const isCardCollapsed = (id: string): boolean => {\r\n        if (viewMode === 'list') {\r\n            // W widoku lista: domyślnie zwinięte, chyba że rozwinięte ręcznie\r\n            return !collapsedCards.has(id);\r\n        } else {\r\n            // W widoku grid: domyślnie rozwinięte, chyba że zwinięte ręcznie\r\n            return collapsedCards.has(id);\r\n        }\r\n    };\r\n\r\n    // Reset collapsed state przy zmianie widoku\r\n    const handleViewModeChange = (mode: ViewMode) => {\r\n        setViewMode(mode);\r\n        setCollapsedCards(new Set()); // Reset stanu zwijania\r\n    };\r\n\r\n    if (medicines.length === 0) {\r\n        return (\r\n            <div className=\"neu-flat p-12 text-center animate-fadeInUp\">\r\n                <div className=\"neu-convex w-24 h-24 mx-auto mb-6 flex items-center justify-center animate-popIn\">\r\n                    <SvgIcon name=\"pill\" size={48} style={{ color: 'var(--color-accent)' }} />\r\n                </div>\r\n                <h2 className=\"mb-2 text-xl font-semibold\" style={{ color: 'var(--color-text)' }}>\r\n                    Twoja apteczka jest pusta\r\n                </h2>\r\n                <p className=\"mb-6\" style={{ color: 'var(--color-text-muted)' }}>\r\n                    Zaimportuj leki, aby rozpocząć zarządzanie apteczką.\r\n                </p>\r\n                <a\r\n                    href=\"/dodaj\"\r\n                    className=\"neu-btn neu-btn-primary inline-flex items-center gap-2\"\r\n                >\r\n                    <SvgIcon name=\"plus\" size={18} /> Importuj leki\r\n                </a>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (filteredMedicines.length === 0) {\r\n        return (\r\n            <div className=\"neu-flat p-12 text-center animate-fadeInUp\">\r\n                <div className=\"neu-convex w-24 h-24 mx-auto mb-6 flex items-center justify-center animate-popIn\">\r\n                    <SvgIcon name=\"search\" size={48} style={{ color: 'var(--color-accent)' }} />\r\n                </div>\r\n                <h2 className=\"mb-2 text-xl font-semibold\" style={{ color: 'var(--color-text)' }}>\r\n                    Brak wyników\r\n                </h2>\r\n                <p style={{ color: 'var(--color-text-muted)' }}>\r\n                    Żaden lek nie pasuje do wybranych filtrów.\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Header: Unified Toolbar - Counter | Sorting | View Toggle */}\r\n            <div\r\n                className=\"neu-flat-sm flex flex-wrap items-center justify-between gap-3 px-4 py-3 animate-fadeInUp\"\r\n                style={{ animationDelay: '0.1s' }}\r\n            >\r\n                {/* Licznik - jako tekst, nie przycisk */}\r\n                <span className=\"text-sm font-medium order-last sm:order-first w-full sm:w-auto text-center sm:text-left flex items-center justify-center sm:justify-start gap-1.5\" style={{ color: 'var(--color-text)' }}>\r\n                    <SvgIcon name=\"package\" size={16} /> Znaleziono: {filteredMedicines.length} z {totalCount} leków\r\n                </span>\r\n\r\n                {/* Sortowanie + Widok - zawsze razem */}\r\n                <div className=\"flex items-center gap-3 mx-auto sm:mx-0\">\r\n                    {/* Sortowanie */}\r\n                    <div className=\"flex items-center gap-1\">\r\n                        <span className=\"text-xs\" style={{ color: 'var(--color-text-muted)' }}>Sortuj:</span>\r\n                        {[\r\n                            { key: 'nazwa', label: 'Nazwa' },\r\n                            { key: 'dataDodania', label: 'Data' },\r\n                            { key: 'terminWaznosci', label: 'Termin' },\r\n                        ].map((opt) => (\r\n                            <button\r\n                                key={opt.key}\r\n                                onClick={() => onSortChange(opt.key as SortOption)}\r\n                                className={`neu-tag text-xs ${sortBy === opt.key ? 'active' : ''}`}\r\n                            >\r\n                                {opt.label} {sortBy === opt.key && (sortDir === 'asc' ? '↑' : '↓')}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Separator */}\r\n                    <div className=\"w-px h-5 bg-current opacity-20\" />\r\n\r\n                    {/* View Mode Toggle */}\r\n                    <div className=\"flex gap-1\">\r\n                        <button\r\n                            onClick={() => handleViewModeChange('grid')}\r\n                            className={`neu-tag p-2 transition-all ${viewMode === 'grid' ? 'active' : ''}`}\r\n                            title=\"Widok kafelków\"\r\n                            aria-label=\"Widok kafelków\"\r\n                            aria-pressed={viewMode === 'grid'}\r\n                        >\r\n                            <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"\r\n                                style={{ color: viewMode === 'grid' ? 'white' : 'var(--color-text-muted)' }}>\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                                    d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\r\n                            </svg>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => handleViewModeChange('list')}\r\n                            className={`neu-tag p-2 transition-all ${viewMode === 'list' ? 'active' : ''}`}\r\n                            title=\"Widok listy\"\r\n                            aria-label=\"Widok listy\"\r\n                            aria-pressed={viewMode === 'list'}\r\n                        >\r\n                            <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"\r\n                                style={{ color: viewMode === 'list' ? 'white' : 'var(--color-text-muted)' }}>\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\r\n                                    d=\"M4 5h16a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1V6a1 1 0 011-1zM4 14h16a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1v-3a1 1 0 011-1z\" />\r\n                            </svg>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Grid/List z kartami */}\r\n            <div className={viewMode === 'grid'\r\n                ? 'grid gap-5 sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3'\r\n                : 'flex flex-col gap-3'\r\n            }>\r\n                {filteredMedicines.map((medicine, index) => (\r\n                    <div\r\n                        key={medicine.id}\r\n                        className=\"animate-fadeInUp\"\r\n                        style={{ animationDelay: `${0.1 + index * 0.05}s` }}\r\n                    >\r\n                        <MedicineCard\r\n                            medicine={medicine}\r\n                            onDelete={onDelete}\r\n                            onUpdateExpiry={onUpdateExpiry}\r\n                            onUpdateLabels={onUpdateLabels}\r\n                            onUpdateNote={onUpdateNote}\r\n                            onUpdateLeaflet={onUpdateLeaflet}\r\n                            isCollapsed={isCardCollapsed(medicine.id)}\r\n                            onToggleCollapse={() => toggleCollapse(medicine.id)}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","'use client';\r\n\r\n// src/components/Filters.tsx\r\n// Filtry dla listy léków - Neumorphism Style z możliwością zwijania\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Image from 'next/image';\r\nimport type { FilterState, ExpiryFilter, UserLabel } from '@/lib/types';\r\nimport { TAG_CATEGORIES, LABEL_COLORS } from '@/lib/types';\r\nimport { getLabels } from '@/lib/labelStorage';\r\nimport LabelManager from './LabelManager';\r\nimport { SvgIcon } from './SvgIcon';\r\n\r\ninterface FiltersProps {\r\n    filters: FilterState;\r\n    onFiltersChange: (filters: FilterState) => void;\r\n    onExportPDF?: () => void;\r\n    onCopyList?: () => void;\r\n    onClearAll?: () => void;\r\n}\r\n\r\nexport default function Filters({ filters, onFiltersChange, onExportPDF, onCopyList, onClearAll }: FiltersProps) {\r\n    // Domyślnie wszystko schowane\r\n    const [isExpiryCollapsed, setIsExpiryCollapsed] = useState(true);\r\n    const [isFiltersCollapsed, setIsFiltersCollapsed] = useState(true);\r\n    const [isLabelsCollapsed, setIsLabelsCollapsed] = useState(true);\r\n    const [isLabelManagerOpen, setIsLabelManagerOpen] = useState(false);\r\n    const [userLabels, setUserLabels] = useState<UserLabel[]>([]);\r\n    // Stan zwijania poszczególnych kategorii tagów\r\n    const [collapsedCategories, setCollapsedCategories] = useState<Record<string, boolean>>({});\r\n\r\n    // Załaduj stan zwijania z localStorage\r\n    useEffect(() => {\r\n        const savedExpiry = localStorage.getItem('expiryCollapsed');\r\n        const savedFilters = localStorage.getItem('filtersCollapsed');\r\n        const savedLabels = localStorage.getItem('labelsCollapsed');\r\n\r\n        if (savedExpiry !== null) setIsExpiryCollapsed(savedExpiry === 'true');\r\n        if (savedFilters !== null) setIsFiltersCollapsed(savedFilters === 'true');\r\n        if (savedLabels !== null) setIsLabelsCollapsed(savedLabels === 'true');\r\n        // Załaduj stan zwijania kategorii\r\n        const savedCategories = localStorage.getItem('collapsedCategories');\r\n        if (savedCategories) {\r\n            try {\r\n                setCollapsedCategories(JSON.parse(savedCategories));\r\n            } catch { /* ignore */ }\r\n        }\r\n    }, []);\r\n\r\n    // Zapisz stan zwijania do localStorage\r\n    useEffect(() => {\r\n        localStorage.setItem('expiryCollapsed', String(isExpiryCollapsed));\r\n    }, [isExpiryCollapsed]);\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('filtersCollapsed', String(isFiltersCollapsed));\r\n    }, [isFiltersCollapsed]);\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('labelsCollapsed', String(isLabelsCollapsed));\r\n    }, [isLabelsCollapsed]);\r\n\r\n    // Zapisz stan zwijania kategorii\r\n    useEffect(() => {\r\n        localStorage.setItem('collapsedCategories', JSON.stringify(collapsedCategories));\r\n    }, [collapsedCategories]);\r\n\r\n    const toggleCategory = (key: string) => {\r\n        setCollapsedCategories(prev => ({ ...prev, [key]: !prev[key] }));\r\n    };\r\n\r\n    // Załaduj etykiety\r\n    useEffect(() => {\r\n        setUserLabels(getLabels());\r\n    }, []);\r\n\r\n    // Nasłuchuj na zmiany etykiet (z kart leków)\r\n    useEffect(() => {\r\n        const handleLabelsUpdated = () => {\r\n            setUserLabels(getLabels());\r\n        };\r\n        window.addEventListener('labelsUpdated', handleLabelsUpdated);\r\n        return () => window.removeEventListener('labelsUpdated', handleLabelsUpdated);\r\n    }, []);\r\n\r\n    const refreshLabels = () => {\r\n        setUserLabels(getLabels());\r\n    };\r\n\r\n    const handleSearchChange = (search: string) => {\r\n        onFiltersChange({ ...filters, search });\r\n    };\r\n\r\n    const handleTagToggle = (tag: string) => {\r\n        const newTags = filters.tags.includes(tag)\r\n            ? filters.tags.filter(t => t !== tag)\r\n            : [...filters.tags, tag];\r\n        onFiltersChange({ ...filters, tags: newTags });\r\n    };\r\n\r\n    const handleExpiryChange = (expiry: ExpiryFilter) => {\r\n        onFiltersChange({ ...filters, expiry });\r\n    };\r\n\r\n    const handleLabelToggle = (labelId: string) => {\r\n        const newLabels = filters.labels.includes(labelId)\r\n            ? filters.labels.filter(l => l !== labelId)\r\n            : [...filters.labels, labelId];\r\n        onFiltersChange({ ...filters, labels: newLabels });\r\n    };\r\n\r\n    const handleClearFilters = () => {\r\n        onFiltersChange({ tags: [], labels: [], search: '', expiry: 'all' });\r\n    };\r\n\r\n    const hasActiveFilters = filters.tags.length > 0 || filters.labels.length > 0 || filters.search || filters.expiry !== 'all';\r\n\r\n    return (\r\n        <div className=\"neu-flat p-5 space-y-5 animate-fadeInUp\">\r\n            {/* Tytuł strony + przyciski */}\r\n            <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n                <h1 className=\"text-xl font-bold flex items-center gap-2\" style={{ color: 'var(--color-text)' }}>\r\n                    <Image src=\"/icons/twoja_apteczka.png\" alt=\"Twoja apteczka\" width={36} height={36} />\r\n                    Twoja apteczka\r\n                </h1>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                    {onCopyList && (\r\n                        <button\r\n                            onClick={onCopyList}\r\n                            className=\"neu-btn neu-btn-secondary text-sm\"\r\n                            title=\"Kopiuj listę leków\"\r\n                        >\r\n                            <SvgIcon name=\"clipboard-list\" size={16} style={{ color: 'var(--color-text)' }} />\r\n                            Lista\r\n                        </button>\r\n                    )}\r\n                    {onExportPDF && (\r\n                        <button\r\n                            onClick={onExportPDF}\r\n                            className=\"neu-btn neu-btn-secondary text-sm\"\r\n                            title=\"Eksportuj do PDF\"\r\n                        >\r\n                            <SvgIcon name=\"file-input\" size={16} style={{ color: 'var(--color-text)' }} />\r\n                            PDF\r\n                        </button>\r\n                    )}\r\n                    {onClearAll && (\r\n                        <button\r\n                            onClick={() => {\r\n                                if (window.confirm('Czy na pewno chcesz wyczyścić całą apteczkę? Tej operacji nie można cofnąć.')) {\r\n                                    onClearAll();\r\n                                }\r\n                            }}\r\n                            className=\"neu-btn neu-btn-secondary text-sm flex items-center gap-1 group/clear\"\r\n                            title=\"Wyczyść całą apteczkę\"\r\n                        >\r\n                            <SvgIcon name=\"trash\" size={16} style={{ color: 'var(--color-error)' }} />\r\n                            <span className=\"group-hover/clear:text-[var(--color-error)] transition-colors\" style={{ color: 'var(--color-text)' }}>Wyczyść</span>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Wyszukiwanie */}\r\n            <div>\r\n                <label htmlFor=\"search\" className=\"mb-2 block text-sm font-medium flex items-center gap-1.5\" style={{ color: 'var(--color-text)' }}>\r\n                    <SvgIcon name=\"search\" size={16} /> Szukaj\r\n                </label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"search\"\r\n                    value={filters.search}\r\n                    onChange={(e) => handleSearchChange(e.target.value)}\r\n                    placeholder=\"Nazwa, opis, wskazania...\"\r\n                    className=\"neu-input\"\r\n                    style={{ padding: '0.75rem 1rem', fontSize: '0.875rem' }}\r\n                />\r\n            </div>\r\n\r\n            {/* Filtr terminu ważności - zwijalna */}\r\n            <div>\r\n                {/* Nagłówek - klikalny do zwijania */}\r\n                <div\r\n                    className=\"mb-2 flex items-center justify-between cursor-pointer group\"\r\n                    onClick={() => setIsExpiryCollapsed(!isExpiryCollapsed)}\r\n                    role=\"button\"\r\n                    aria-expanded={!isExpiryCollapsed}\r\n                >\r\n                    <label className=\"text-sm font-medium cursor-pointer flex items-center gap-2\" style={{ color: 'var(--color-text)' }}>\r\n                        <SvgIcon name=\"calendar\" size={16} /> Termin ważności\r\n                        <span\r\n                            className={`neu-tag p-1 transition-all group-hover:scale-110 ${!isExpiryCollapsed ? 'active' : ''}`}\r\n                            style={{ borderRadius: '50%' }}\r\n                        >\r\n                            <svg\r\n                                className=\"h-3 w-3 transition-transform duration-300\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                style={{ color: !isExpiryCollapsed ? 'white' : 'var(--color-text-muted)' }}\r\n                            >\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={isExpiryCollapsed ? \"M15 19l-7-7 7-7\" : \"M19 9l-7 7-7-7\"} />\r\n                            </svg>\r\n                        </span>\r\n                    </label>\r\n                    {/* Pokaż aktywny filtr terminu gdy zwinięte */}\r\n                    {isExpiryCollapsed && filters.expiry !== 'all' && (\r\n                        <span className=\"neu-tag active text-xs flex items-center gap-1\">\r\n                            {filters.expiry === 'expired' && <><SvgIcon name=\"alert-triangle\" size={12} /> Przeterminowane</>}\r\n                            {filters.expiry === 'expiring-soon' && <><SvgIcon name=\"clock\" size={12} /> Kończą się</>}\r\n                            {filters.expiry === 'valid' && <><SvgIcon name=\"check-circle\" size={12} /> Ważne</>}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Przyciski terminu - ukryte gdy zwinięte */}\r\n                <div\r\n                    className={`overflow-hidden transition-all duration-300 ease-in-out ${isExpiryCollapsed ? 'max-h-0 opacity-0' : 'max-h-[100px] opacity-100'}`}\r\n                >\r\n                    <div className=\"flex flex-wrap gap-2 pt-2 pb-2\">\r\n                        {[\r\n                            { value: 'all', label: 'Wszystkie', icon: 'clipboard' as const },\r\n                            { value: 'expired', label: 'Przeterminowane', icon: 'alert-triangle' as const },\r\n                            { value: 'expiring-soon', label: 'Kończą się', icon: 'clock' as const },\r\n                            { value: 'valid', label: 'Ważne', icon: 'check-circle' as const }\r\n                        ].map(option => (\r\n                            <button\r\n                                key={option.value}\r\n                                onClick={(e) => { e.stopPropagation(); handleExpiryChange(option.value as ExpiryFilter); }}\r\n                                className={`neu-tag transition-all flex items-center gap-1 ${filters.expiry === option.value ? 'active' : ''}`}\r\n                            >\r\n                                <SvgIcon name={option.icon} size={14} /> {option.label}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Sekcja Filtry (dawniej Tagi) - zwijalna */}\r\n            <div>\r\n                {/* Nagłówek - klikalny do zwijania */}\r\n                <div\r\n                    className=\"mb-2 flex items-center justify-between cursor-pointer group\"\r\n                    onClick={() => setIsFiltersCollapsed(!isFiltersCollapsed)}\r\n                    role=\"button\"\r\n                    aria-expanded={!isFiltersCollapsed}\r\n                >\r\n                    <label className=\"text-sm font-medium cursor-pointer flex items-center gap-2\" style={{ color: 'var(--color-text)' }}>\r\n                        <SvgIcon name=\"funnel\" size={16} /> Filtry\r\n                        <span\r\n                            className={`neu-tag p-1 transition-all group-hover:scale-110 ${!isFiltersCollapsed ? 'active' : ''}`}\r\n                            style={{ borderRadius: '50%' }}\r\n                        >\r\n                            <svg\r\n                                className=\"h-3 w-3 transition-transform duration-300\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                style={{ color: !isFiltersCollapsed ? 'white' : 'var(--color-text-muted)' }}\r\n                            >\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={isFiltersCollapsed ? \"M15 19l-7-7 7-7\" : \"M19 9l-7 7-7-7\"} />\r\n                            </svg>\r\n                        </span>\r\n                    </label>\r\n                    {hasActiveFilters && (\r\n                        <button\r\n                            onClick={(e) => { e.stopPropagation(); handleClearFilters(); }}\r\n                            className=\"neu-tag text-xs\"\r\n                            style={{ color: 'var(--color-error)' }}\r\n                        >\r\n                            ✕ Wyczyść filtry\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Kategorie filtrów - ukryte gdy zwinięte */}\r\n                <div\r\n                    className={`overflow-hidden transition-all duration-300 ease-in-out ${isFiltersCollapsed ? 'max-h-0 opacity-0' : 'max-h-[2000px] opacity-100'}`}\r\n                >\r\n                    <div className=\"space-y-3 py-3 px-2\">\r\n                        {TAG_CATEGORIES.map(category => {\r\n                            const isCollapsed = collapsedCategories[category.key] ?? true;\r\n                            const activeCount = category.tags.filter(tag => filters.tags.includes(tag)).length;\r\n\r\n                            return (\r\n                                <div key={category.key} className=\"mb-2\">\r\n                                    {/* Nagłówek kategorii - klikalny, wypukły/wciśnięty */}\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => toggleCategory(category.key)}\r\n                                        className={`neu-flat-sm w-full flex items-center justify-between text-left py-2 pl-4 pr-3 rounded-xl transition-all duration-200 cursor-pointer select-none ${!isCollapsed ? 'active' : ''}`}\r\n                                    >\r\n                                        <span\r\n                                            className=\"text-xs font-medium flex items-center gap-1.5\"\r\n                                            style={{ color: isCollapsed ? 'var(--color-text-muted)' : 'white' }}\r\n                                        >\r\n                                            <svg\r\n                                                className=\"h-2.5 w-2.5 transition-transform duration-200\"\r\n                                                fill=\"none\"\r\n                                                stroke=\"currentColor\"\r\n                                                viewBox=\"0 0 24 24\"\r\n                                            >\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={isCollapsed ? \"M9 5l7 7-7 7\" : \"M19 9l-7 7-7-7\"} />\r\n                                            </svg>\r\n                                            {category.label}\r\n                                        </span>\r\n                                        <div className=\"flex items-center gap-1.5\">\r\n                                            <span className=\"text-[10px]\" style={{ color: 'var(--color-text-muted)', opacity: 0.5 }}>\r\n                                                {category.tags.length}\r\n                                            </span>\r\n                                            {activeCount > 0 && (\r\n                                                <span\r\n                                                    className=\"text-[10px] min-w-[16px] text-center px-1 py-0.5 rounded-full\"\r\n                                                    style={{ background: 'var(--color-accent)', color: 'white' }}\r\n                                                >\r\n                                                    {activeCount}\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                    </button>\r\n\r\n                                    {/* Tagi - ukryte gdy kategoria zwinięta */}\r\n                                    <div\r\n                                        className={`overflow-hidden transition-all duration-200 ${isCollapsed ? 'max-h-0 opacity-0' : 'max-h-[500px] opacity-100 mt-2'}`}\r\n                                    >\r\n                                        <div className=\"flex flex-wrap gap-1.5 pl-3 pr-1 py-1\">\r\n                                            {category.tags.map(tag => (\r\n                                                <button\r\n                                                    key={tag}\r\n                                                    onClick={() => handleTagToggle(tag)}\r\n                                                    className={`neu-tag text-xs transition-all ${filters.tags.includes(tag) ? 'active' : ''}`}\r\n                                                >\r\n                                                    {tag}\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Sekcja Moje etykiety - zwijalna */}\r\n            <div className=\"mt-4\">\r\n                {/* Nagłówek */}\r\n                <div\r\n                    className=\"mb-2 flex items-center justify-between cursor-pointer group\"\r\n                    onClick={() => setIsLabelsCollapsed(!isLabelsCollapsed)}\r\n                    role=\"button\"\r\n                    aria-expanded={!isLabelsCollapsed}\r\n                >\r\n                    <label className=\"text-sm font-medium cursor-pointer flex items-center gap-2\" style={{ color: 'var(--color-text)' }}>\r\n                        <SvgIcon name=\"tags\" size={16} /> Moje etykiety\r\n                        <span\r\n                            className={`neu-tag p-1 transition-all group-hover:scale-110 ${!isLabelsCollapsed ? 'active' : ''}`}\r\n                            style={{ borderRadius: '50%' }}\r\n                        >\r\n                            <svg\r\n                                className=\"h-3 w-3 transition-transform duration-300\"\r\n                                fill=\"none\"\r\n                                stroke=\"currentColor\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                style={{ color: !isLabelsCollapsed ? 'white' : 'var(--color-text-muted)' }}\r\n                            >\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={isLabelsCollapsed ? \"M15 19l-7-7 7-7\" : \"M19 9l-7 7-7-7\"} />\r\n                            </svg>\r\n                        </span>\r\n                    </label>\r\n                    {!isLabelsCollapsed && (\r\n                        <button\r\n                            onClick={(e) => { e.stopPropagation(); setIsLabelManagerOpen(!isLabelManagerOpen); }}\r\n                            className=\"neu-tag text-xs flex items-center gap-1\"\r\n                            style={{ color: 'var(--color-accent)' }}\r\n                        >\r\n                            <SvgIcon name=\"settings\" size={14} /> Zarządzaj\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Zawartość - ukryta gdy zwinięta */}\r\n                <div\r\n                    className={`overflow-hidden transition-all duration-300 ease-in-out ${isLabelsCollapsed ? 'max-h-0 opacity-0' : 'max-h-[500px] opacity-100'}`}\r\n                >\r\n                    {/* LabelManager */}\r\n                    {isLabelManagerOpen && (\r\n                        <div className=\"mb-3 neu-concave p-3\">\r\n                            <LabelManager onLabelsChange={refreshLabels} />\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Filtry etykiet */}\r\n                    {userLabels.length > 0 ? (\r\n                        <div className=\"flex flex-wrap gap-1.5\">\r\n                            {userLabels.map(label => (\r\n                                <button\r\n                                    key={label.id}\r\n                                    onClick={() => handleLabelToggle(label.id)}\r\n                                    className={`text-xs px-2.5 py-1 rounded-full transition-all ${filters.labels.includes(label.id)\r\n                                        ? 'ring-2 ring-offset-1'\r\n                                        : 'opacity-80 hover:opacity-100'\r\n                                        }`}\r\n                                    style={{\r\n                                        backgroundColor: LABEL_COLORS[label.color].hex,\r\n                                        color: 'white'\r\n                                    }}\r\n                                >\r\n                                    {label.name}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <p className=\"text-xs\" style={{ color: 'var(--color-text-muted)' }}>\r\n                            Brak etykiet. Kliknij \"Zarządzaj\" aby dodać.\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Aktywne filtry (podsumowanie) */}\r\n            {(filters.tags.length > 0 || filters.labels.length > 0) && (\r\n                <div className=\"pt-4\" style={{ borderTop: '1px solid var(--shadow-dark)' }}>\r\n                    <span className=\"text-xs font-medium\" style={{ color: 'var(--color-text-muted)' }}>\r\n                        Aktywne filtry ({filters.tags.length + filters.labels.length}):\r\n                    </span>\r\n                    <div className=\"mt-2 flex flex-wrap gap-1.5\">\r\n                        {filters.tags.map(tag => (\r\n                            <span\r\n                                key={tag}\r\n                                className=\"neu-tag active text-xs inline-flex items-center\"\r\n                            >\r\n                                {tag}\r\n                                <button\r\n                                    onClick={() => handleTagToggle(tag)}\r\n                                    className=\"ml-1.5 hover:scale-110 transition-transform\"\r\n                                    aria-label={`Usuń filtr ${tag}`}\r\n                                >\r\n                                    ×\r\n                                </button>\r\n                            </span>\r\n                        ))}\r\n                        {filters.labels.map(labelId => {\r\n                            const label = userLabels.find(l => l.id === labelId);\r\n                            if (!label) return null;\r\n                            return (\r\n                                <span\r\n                                    key={labelId}\r\n                                    className=\"text-xs inline-flex items-center px-2 py-0.5 rounded-full\"\r\n                                    style={{ backgroundColor: LABEL_COLORS[label.color].hex, color: 'white' }}\r\n                                >\r\n                                    {label.name}\r\n                                    <button\r\n                                        onClick={() => handleLabelToggle(labelId)}\r\n                                        className=\"ml-1.5 hover:scale-110 transition-transform opacity-70 hover:opacity-100\"\r\n                                        aria-label={`Usuń etykietę ${label.name}`}\r\n                                    >\r\n                                        ×\r\n                                    </button>\r\n                                </span>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\n// src/components/LabelManager.tsx\r\n// Zarządzanie etykietami użytkownika (tworzenie, edycja, usuwanie)\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport type { UserLabel, LabelColor } from '@/lib/types';\r\nimport { LABEL_COLORS, MAX_LABELS_GLOBAL } from '@/lib/types';\r\nimport { getLabels, createLabel, deleteLabel, updateLabel } from '@/lib/labelStorage';\r\n\r\ninterface LabelManagerProps {\r\n    onLabelsChange?: () => void;\r\n}\r\n\r\nexport default function LabelManager({ onLabelsChange }: LabelManagerProps) {\r\n    const [labels, setLabels] = useState<UserLabel[]>([]);\r\n    const [isAdding, setIsAdding] = useState(false);\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [newName, setNewName] = useState('');\r\n    const [newColor, setNewColor] = useState<LabelColor>('green');\r\n    const [error, setError] = useState('');\r\n\r\n    // Załaduj etykiety przy montowaniu\r\n    useEffect(() => {\r\n        setLabels(getLabels());\r\n    }, []);\r\n\r\n    const refreshLabels = () => {\r\n        setLabels(getLabels());\r\n        onLabelsChange?.();\r\n    };\r\n\r\n    const handleCreate = () => {\r\n        setError('');\r\n\r\n        if (!newName.trim()) {\r\n            setError('Nazwa jest wymagana');\r\n            return;\r\n        }\r\n\r\n        const result = createLabel(newName.trim(), newColor);\r\n\r\n        if (!result) {\r\n            if (labels.length >= MAX_LABELS_GLOBAL) {\r\n                setError(`Maksymalnie ${MAX_LABELS_GLOBAL} etykiet`);\r\n            } else {\r\n                setError('Etykieta o tej nazwie już istnieje');\r\n            }\r\n            return;\r\n        }\r\n\r\n        setNewName('');\r\n        setNewColor('green');\r\n        setIsAdding(false);\r\n        refreshLabels();\r\n    };\r\n\r\n    const handleDelete = (id: string) => {\r\n        if (confirm('Usunąć etykietę? Zostanie usunięta ze wszystkich leków.')) {\r\n            deleteLabel(id);\r\n            refreshLabels();\r\n        }\r\n    };\r\n\r\n    const handleUpdate = (id: string, name: string, color: LabelColor) => {\r\n        const result = updateLabel(id, { name, color });\r\n        if (!result) {\r\n            setError('Etykieta o tej nazwie już istnieje');\r\n            return;\r\n        }\r\n        setEditingId(null);\r\n        refreshLabels();\r\n    };\r\n\r\n    const colorOptions = Object.entries(LABEL_COLORS) as [LabelColor, typeof LABEL_COLORS[LabelColor]][];\r\n\r\n    return (\r\n        <div className=\"space-y-3\">\r\n            {/* Nagłówek */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-xs font-medium\" style={{ color: 'var(--color-text-muted)' }}>\r\n                    Moje etykiety ({labels.length}/{MAX_LABELS_GLOBAL})\r\n                </span>\r\n                {!isAdding && labels.length < MAX_LABELS_GLOBAL && (\r\n                    <button\r\n                        onClick={() => setIsAdding(true)}\r\n                        className=\"neu-tag text-xs\"\r\n                        style={{ color: 'var(--color-accent)' }}\r\n                    >\r\n                        + Dodaj\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Formularz dodawania */}\r\n            {isAdding && (\r\n                <div className=\"neu-concave p-3 space-y-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={newName}\r\n                        onChange={(e) => setNewName(e.target.value)}\r\n                        placeholder=\"Nazwa etykiety...\"\r\n                        className=\"neu-input text-sm\"\r\n                        style={{ padding: '0.5rem' }}\r\n                        maxLength={20}\r\n                        autoFocus\r\n                    />\r\n\r\n                    {/* Wybór koloru */}\r\n                    <div className=\"flex flex-wrap gap-1.5\">\r\n                        {colorOptions.map(([key, value]) => (\r\n                            <button\r\n                                key={key}\r\n                                onClick={() => setNewColor(key)}\r\n                                className={`w-6 h-6 rounded-full transition-all ${newColor === key ? 'ring-2 ring-offset-2' : ''}`}\r\n                                style={{\r\n                                    backgroundColor: value.hex,\r\n                                    outlineColor: newColor === key ? value.hex : undefined\r\n                                }}\r\n                                title={value.name}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <p className=\"text-xs\" style={{ color: 'var(--color-error)' }}>{error}</p>\r\n                    )}\r\n\r\n                    <div className=\"flex gap-2\">\r\n                        <button\r\n                            onClick={handleCreate}\r\n                            className=\"neu-tag text-xs\"\r\n                            style={{ color: 'var(--color-success)' }}\r\n                        >\r\n                            Zapisz\r\n                        </button>\r\n                        <button\r\n                            onClick={() => { setIsAdding(false); setError(''); setNewName(''); }}\r\n                            className=\"neu-tag text-xs\"\r\n                        >\r\n                            Anuluj\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Lista etykiet */}\r\n            {labels.length > 0 ? (\r\n                <div className=\"flex flex-wrap gap-1.5\">\r\n                    {labels.map(label => (\r\n                        <div\r\n                            key={label.id}\r\n                            className=\"group relative\"\r\n                        >\r\n                            {editingId === label.id ? (\r\n                                <EditLabelForm\r\n                                    label={label}\r\n                                    onSave={(name, color) => handleUpdate(label.id, name, color)}\r\n                                    onCancel={() => setEditingId(null)}\r\n                                />\r\n                            ) : (\r\n                                <span\r\n                                    className=\"neu-label inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full cursor-pointer\"\r\n                                    style={{\r\n                                        backgroundColor: LABEL_COLORS[label.color].hex,\r\n                                        color: 'white'\r\n                                    }}\r\n                                    onClick={() => setEditingId(label.id)}\r\n                                    title=\"Kliknij, aby edytować\"\r\n                                >\r\n                                    {label.name}\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); handleDelete(label.id); }}\r\n                                        className=\"ml-0.5 opacity-60 hover:opacity-100\"\r\n                                    >\r\n                                        ×\r\n                                    </button>\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : !isAdding && (\r\n                <p className=\"text-xs\" style={{ color: 'var(--color-text-muted)' }}>\r\n                    Brak etykiet. Dodaj pierwszą etykietę.\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n// Komponent edycji etykiety\r\nfunction EditLabelForm({\r\n    label,\r\n    onSave,\r\n    onCancel\r\n}: {\r\n    label: UserLabel;\r\n    onSave: (name: string, color: LabelColor) => void;\r\n    onCancel: () => void;\r\n}) {\r\n    const [name, setName] = useState(label.name);\r\n    const [color, setColor] = useState<LabelColor>(label.color);\r\n    const colorOptions = Object.entries(LABEL_COLORS) as [LabelColor, typeof LABEL_COLORS[LabelColor]][];\r\n\r\n    return (\r\n        <div className=\"neu-concave p-2 space-y-2\" style={{ minWidth: '150px' }}>\r\n            <input\r\n                type=\"text\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                className=\"neu-input text-xs w-full\"\r\n                style={{ padding: '0.375rem' }}\r\n                maxLength={20}\r\n                autoFocus\r\n            />\r\n            <div className=\"flex flex-wrap gap-1\">\r\n                {colorOptions.map(([key, value]) => (\r\n                    <button\r\n                        key={key}\r\n                        onClick={() => setColor(key)}\r\n                        className={`w-5 h-5 rounded-full ${color === key ? 'ring-2 ring-offset-1' : ''}`}\r\n                        style={{ backgroundColor: value.hex }}\r\n                    />\r\n                ))}\r\n            </div>\r\n            <div className=\"flex gap-1\">\r\n                <button onClick={() => onSave(name, color)} className=\"neu-tag text-xs\" style={{ color: 'var(--color-success)' }}>✓</button>\r\n                <button onClick={onCancel} className=\"neu-tag text-xs\">✕</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"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","ignoreList":[0]}