module.exports=[66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},73603,49666,a=>{"use strict";var b=a.i(66680);let c={randomUUID:b.randomUUID},d=new Uint8Array(256),e=d.length,f=[];for(let a=0;a<256;++a)f.push((a+256).toString(16).slice(1));let g=function(a,g,h){if(c.randomUUID&&!g&&!a)return c.randomUUID();var i=a,j=h;let k=(i=i||{}).random??i.rng?.()??(e>d.length-16&&((0,b.randomFillSync)(d),e=0),d.slice(e,e+=16));if(k.length<16)throw Error("Random bytes length must be >= 16");if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,g){if((j=j||0)<0||j+16>g.length)throw RangeError(`UUID byte range ${j}:${j+15} is out of buffer bounds`);for(let a=0;a<16;++a)g[j+a]=k[a];return g}return function(a,b=0){return(f[a[b+0]]+f[a[b+1]]+f[a[b+2]]+f[a[b+3]]+"-"+f[a[b+4]]+f[a[b+5]]+"-"+f[a[b+6]]+f[a[b+7]]+"-"+f[a[b+8]]+f[a[b+9]]+"-"+f[a[b+10]]+f[a[b+11]]+f[a[b+12]]+f[a[b+13]]+f[a[b+14]]+f[a[b+15]]).toLowerCase()}(k)};function h(){return[]}function i(a){}function j(a){let b=[],c=[];for(let d of a){if(!d.nazwa)continue;let a=b.find(a=>a.nazwa?.toLowerCase().trim()===d.nazwa?.toLowerCase().trim());a&&c.push({nazwa:d.nazwa,existingId:a.id})}return c}function k(a,b){let c=[],d=[];for(let e of a.leki){if(!e.nazwa){let a={id:g(),nazwa:e.nazwa,opis:e.opis,wskazania:e.wskazania,tagi:e.tagi,labels:e.labels,notatka:e.notatka,dataDodania:new Date().toISOString()};d.push(a);continue}let a=b.get(e.nazwa)||"add",f=c.findIndex(a=>a.nazwa?.toLowerCase().trim()===e.nazwa?.toLowerCase().trim());if(-1!==f&&"replace"===a)c[f]={...c[f],opis:e.opis,wskazania:e.wskazania,tagi:e.tagi,labels:e.labels,notatka:e.notatka};else{if("skip"===a)continue;let b={id:g(),nazwa:e.nazwa,opis:e.opis,wskazania:e.wskazania,tagi:e.tagi,labels:e.labels,notatka:e.notatka,dataDodania:new Date().toISOString()};d.push(b)}}return i([...c,...d]),d}function l(a,b){let c=[],d=[];for(let e of a.leki){if(!e.nazwa){let a={...e,id:g(),dataDodania:e.dataDodania||new Date().toISOString()};d.push(a);continue}let a=b.get(e.nazwa)||"add",f=c.findIndex(a=>a.nazwa?.toLowerCase().trim()===e.nazwa?.toLowerCase().trim());if(-1!==f&&"replace"===a)c[f]={...e,id:c[f].id};else{if("skip"===a)continue;let b={...e,id:g(),dataDodania:e.dataDodania||new Date().toISOString()};d.push(b)}}return i([...c,...d]),d}function m(a){let b=[],c=b.filter(b=>b.id!==a);return c.length!==b.length&&(i(c),!0)}function n(a,b){let c=[],d=c.findIndex(b=>b.id===a);return -1===d?null:(c[d]={...c[d],...b},i(c),c[d])}function o(){}function p(){return JSON.stringify({leki:[]},null,2)}function q(a){if(!a||"object"!=typeof a||!Array.isArray(a.leki)||0===a.leki.length)return!1;let b=a.leki[0];return"string"==typeof b.id&&"string"==typeof b.dataDodania}a.s(["v4",0,g],49666),a.s(["clearMedicines",()=>o,"deleteMedicine",()=>m,"exportMedicines",()=>p,"findDuplicates",()=>j,"getMedicines",()=>h,"importBackup",()=>l,"importMedicinesWithDuplicateHandling",()=>k,"isBackupFormat",()=>q,"updateMedicine",()=>n],73603)},48009,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(73603),e=a.i(38246),f=a.i(71987),g=a.i(3432);function h(){let[a,h]=(0,c.useState)(0),[i,j]=(0,c.useState)("idle"),[k,l]=(0,c.useState)("idle");(0,c.useEffect)(()=>{h((0,d.getMedicines)().length)},[]);let m=async()=>{try{let a=(0,d.exportMedicines)();await navigator.clipboard.writeText(a),j("copied"),setTimeout(()=>j("idle"),2e3)}catch{j("error"),setTimeout(()=>j("idle"),2e3)}},n=`{
  "leki": [
    {
      "id": "abc-123",
      "nazwa": "Paracetamol",
      "opis": "Lek przeciwb\xf3lowy...",
      "wskazania": ["b\xf3l głowy"],
      "tagi": ["przeciwb\xf3lowy"],
      "labels": ["label-id-1"],
      "notatka": "Dawkowanie: 1 tabletka co 6h",
      "terminWaznosci": "2025-12-31",
      "dataDodania": "2024-01-15"
    }
  ]
}`;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"neu-flat p-6 animate-fadeInUp",style:{animationDelay:"0.1s",background:"linear-gradient(145deg, var(--color-bg-light), var(--color-bg-dark))"},children:(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",style:{color:"var(--color-text)"},children:"Kopia zapasowa"}),(0,b.jsx)("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"Pobierz lub skopiuj dane apteczki"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"neu-convex flex h-12 w-12 items-center justify-center",style:{borderRadius:"50%"},children:(0,b.jsx)(f.default,{src:"/icons/backup.png",alt:"Pudełko otwarte",width:28,height:28})}),(0,b.jsx)("span",{style:{color:"var(--color-text-muted)"},children:"→"}),(0,b.jsx)("div",{className:"neu-convex flex h-12 w-12 items-center justify-center",style:{borderRadius:"50%"},children:(0,b.jsx)(f.default,{src:"/icons/backup_closed.png",alt:"Pudełko zamknięte",width:28,height:28})})]}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"Liczba leków w pudełku:"}),(0,b.jsx)("span",{className:"text-2xl font-bold",style:{color:"var(--color-accent)"},children:a})]})]})}),0===a?(0,b.jsxs)("div",{className:"neu-flat p-8 text-center animate-fadeInUp",style:{animationDelay:"0.2s",background:"linear-gradient(145deg, #fef3c7, #fde68a)"},children:[(0,b.jsx)("div",{className:"neu-convex w-20 h-20 mx-auto mb-4 flex items-center justify-center animate-popIn",children:(0,b.jsx)(g.SvgIcon,{name:"package",size:40,style:{color:"var(--color-warning)"}})}),(0,b.jsx)("p",{className:"text-lg font-medium",style:{color:"#92400e"},children:"Apteczka jest pusta"}),(0,b.jsx)("p",{className:"mt-2 text-sm",style:{color:"#78350f"},children:"Nie ma czego eksportować. Najpierw dodaj leki."}),(0,b.jsxs)(e.default,{href:"/dodaj",className:"mt-6 inline-flex items-center gap-1.5 neu-btn neu-btn-primary",children:[(0,b.jsx)(g.SvgIcon,{name:"plus",size:16,style:{color:"#8b5cf6"}})," Dodaj leki →"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"neu-flat p-6 animate-fadeInUp",style:{animationDelay:"0.2s"},children:[(0,b.jsxs)("h2",{className:"font-semibold flex items-center gap-1.5",style:{color:"var(--color-text)"},children:[(0,b.jsx)(g.SvgIcon,{name:"folder-output",size:18})," Eksportuj dane"]}),(0,b.jsx)("p",{className:"mt-1 text-sm",style:{color:"var(--color-text-muted)"},children:"Plik zawiera wszystkie leki wraz z terminami ważności i datami dodania."}),(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[(0,b.jsxs)("button",{onClick:()=>{try{let a=(0,d.exportMedicines)(),b="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=document.createElement("a");c.setAttribute("href",b),c.setAttribute("download",`apteczka_backup_${new Date().toISOString().split("T")[0]}.json`),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),l("success"),setTimeout(()=>l("idle"),3e3)}catch{l("error"),setTimeout(()=>l("idle"),3e3)}},className:`neu-btn ${"success"===k||"error"===k?"":"neu-btn-primary"}`,style:"success"===k?{background:"var(--color-success)",color:"white"}:"error"===k?{background:"var(--color-error)",color:"white"}:{},children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"success"===k&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.SvgIcon,{name:"check-circle",size:14})," Pobrano!"]}),"error"===k&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.SvgIcon,{name:"x-circle",size:14})," Błąd pobierania"]}),"idle"===k&&"Pobierz plik .json"]}),(0,b.jsxs)("button",{onClick:m,className:"neu-btn neu-btn-secondary ",style:"copied"===i?{color:"var(--color-success)"}:{},children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"copied"===i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.SvgIcon,{name:"check-circle",size:14})," Skopiowano!"]}):"Kopiuj JSON"]})]})]}),(0,b.jsxs)("div",{className:"warning-card neu-flat p-5 animate-fadeInUp",style:{animationDelay:"0.3s"},children:[(0,b.jsxs)("h3",{className:"warning-card-title font-semibold flex items-center gap-1.5",children:[(0,b.jsx)(g.SvgIcon,{name:"alert-triangle",size:18})," Pobieranie nie działa?"]}),(0,b.jsx)("p",{className:"warning-card-text mt-2 text-sm",children:"Niektóre przeglądarki zarządzane przez organizację blokują pobieranie plików. W takim przypadku:"}),(0,b.jsxs)("ol",{className:"warning-card-text mt-3 list-inside list-decimal space-y-1 text-sm",children:[(0,b.jsxs)("li",{children:["Kliknij ",(0,b.jsx)("strong",{children:'"Kopiuj JSON"'})," powyżej"]}),(0,b.jsx)("li",{children:"Otwórz Notatnik (Windows) lub TextEdit (Mac)"}),(0,b.jsx)("li",{children:"Wklej skopiowany tekst (Ctrl+V)"}),(0,b.jsxs)("li",{children:["Zapisz jako ",(0,b.jsx)("code",{className:"neu-tag text-xs",children:"apteczka_backup.json"})]})]})]})]}),(0,b.jsxs)("div",{className:"neu-flat p-6 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[(0,b.jsxs)("h2",{className:"font-semibold flex items-center gap-1.5",style:{color:"var(--color-text)"},children:[(0,b.jsx)(g.SvgIcon,{name:"folder-input",size:18})," Przywracanie kopii zapasowej"]}),(0,b.jsxs)("p",{className:"mt-1 text-sm",style:{color:"var(--color-text-muted)"},children:["Aby przywrócić dane z kopii zapasowej, przejdź do zakładki ",(0,b.jsx)("strong",{children:'"Dodaj leki"'}),"i wczytaj plik .json lub wklej skopiowany JSON."]}),(0,b.jsx)(e.default,{href:"/dodaj",className:"mt-4 inline-block neu-btn neu-btn-secondary",children:"Przejdź do importu →"})]}),(0,b.jsxs)("div",{className:"neu-flat p-6 animate-fadeInUp",style:{animationDelay:"0.5s"},children:[(0,b.jsxs)("h2",{className:"font-semibold flex items-center gap-1.5",style:{color:"var(--color-text)"},children:[(0,b.jsx)(g.SvgIcon,{name:"file-text",size:18})," Format pliku kopii zapasowej"]}),(0,b.jsx)("p",{className:"mt-1 text-sm",style:{color:"var(--color-text-muted)"},children:"Jeśli chcesz ręcznie utworzyć lub edytować plik, użyj tego formatu:"}),(0,b.jsx)("pre",{className:"mt-3 overflow-auto rounded-lg p-4 text-xs",style:{background:"#1a1f1c",color:"var(--color-accent-light)"},children:n}),(0,b.jsxs)("p",{className:"mt-3 text-xs",style:{color:"var(--color-text-muted)"},children:["Pola ",(0,b.jsx)("code",{className:"neu-tag text-xs",children:"id"})," i ",(0,b.jsx)("code",{className:"neu-tag text-xs",children:"dataDodania"})," zostaną wygenerowane automatycznie przy imporcie, jeśli ich brakuje."]})]})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__50b93e12._.js.map